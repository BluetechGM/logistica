{
  "animateLoading": true,
  "borderColor": "transparent",
  "borderOpacity": "0",
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": "0",
  "bottomRow": 138,
  "boxShadow": "none",
  "dynamicBindingPathList": [
    {
      "key": "borderRadius"
    },
    {
      "key": "srcDoc"
    }
  ],
  "dynamicTriggerPathList": [],
  "flexVerticalAlignment": "start",
  "isLoading": false,
  "isVisible": true,
  "key": "wcjiwgvzsi",
  "leftColumn": 0,
  "mobileBottomRow": 41,
  "mobileLeftColumn": 8,
  "mobileRightColumn": 32,
  "mobileTopRow": 9,
  "needsErrorInfo": false,
  "originalBottomRow": 175,
  "originalTopRow": 120,
  "parentColumnSpace": 18.56015625,
  "parentId": "kytv2aa0d3",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "responsiveBehavior": "fill",
  "rightColumn": 64,
  "source": "",
  "srcDoc": "<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<!--\n    TEMPLATE APPSMITH - Sistema de Manuten√ß√£o de Frotas\n    \n    VARI√ÅVEIS DIN√ÇMICAS USADAS:\n    - {{mfs_list.selectedItem.*}} - Dados da solicita√ß√£o selecionada\n    - {{produtos_mf.data}} - Array de produtos da query produtos_mf\n-->\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lista de Solicita√ß√µes - Manuten√ß√£o de Frotas</title>\n\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background-color: #f5f5f5;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 12px;\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n            overflow: hidden;\n        }\n\n        .header {\n            background: linear-gradient(to bottom right, #155A87, #348EB6);\n            color: white;\n            padding: 25px;\n            text-align: center;\n        }\n\n        .header h1 {\n            font-size: 28px;\n            font-weight: 600;\n            margin-bottom: 8px;\n        }\n\n        .header p {\n            font-size: 16px;\n            opacity: 0.9;\n        }\n\n        .solicitacao-card {\n            border: 1px solid #e1e5e9;\n            border-radius: 8px;\n            margin: 20px;\n            padding: 25px;\n            background: white;\n            transition: all 0.3s ease;\n            position: relative;\n        }\n\n        .solicitacao-card:hover {\n            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n            transform: translateY(-2px);\n        }\n\n        .card-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #f0f0f0;\n        }\n\n        .placa-info {\n            display: flex;\n            align-items: center;\n            gap: 15px;\n        }\n\n        .placa-badge {\n            background: linear-gradient(135deg, #155A87, #348EB6);\n            color: white;\n            padding: 8px 16px;\n            border-radius: 20px;\n            font-weight: bold;\n            font-size: 16px;\n            letter-spacing: 1px;\n        }\n\n        .status-badge {\n            padding: 6px 12px;\n            border-radius: 15px;\n            font-size: 12px;\n            font-weight: 600;\n            text-transform: uppercase;\n        }\n\n        .status-aberto {\n            background-color: #fff3cd;\n            color: #856404;\n            border: 1px solid #ffeaa7;\n        }\n\n        .status-aprovado {\n            background-color: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .status-reprovado {\n            background-color: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        .info-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n            gap: 20px;\n            margin-bottom: 20px;\n        }\n\n        .info-section {\n            background: #f8f9fa;\n            padding: 15px;\n            border-radius: 6px;\n            border-left: 4px solid #155A87;\n        }\n\n        .info-section h3 {\n            color: #495057;\n            font-size: 14px;\n            font-weight: 600;\n            margin-bottom: 8px;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n        }\n\n        .info-section p {\n            color: #6c757d;\n            font-size: 14px;\n            line-height: 1.4;\n        }\n\n        .servico-section {\n            background: #e6f1ff;\n            padding: 20px;\n            border-radius: 8px;\n            margin: 15px 0;\n            border-left: 4px solid #155A87;\n        }\n\n        .servico-section h3 {\n            color: #155A87;\n            font-size: 16px;\n            font-weight: 600;\n            margin-bottom: 10px;\n        }\n\n        .servico-section p {\n            color: #424242;\n            font-size: 14px;\n            line-height: 1.6;\n        }\n\n        .produtos-section {\n            background: #e8f4fd;\n            padding: 20px;\n            border-radius: 8px;\n            margin: 15px 0;\n            border-left: 4px solid #348EB6;\n        }\n\n        .produtos-section h3 {\n            color: #155A87;\n            font-size: 16px;\n            font-weight: 600;\n            margin-bottom: 10px;\n        }\n\n        .valor-info {\n            display: flex;\n            gap: 20px;\n            margin-top: 10px;\n            flex-wrap: wrap;\n        }\n\n        .valor-item {\n            background: white;\n            padding: 10px 15px;\n            border-radius: 6px;\n            border: 1px solid #e0e0e0;\n            text-align: center;\n            min-width: 120px;\n        }\n\n        .valor-item .label {\n            font-size: 12px;\n            color: #666;\n            font-weight: 500;\n        }\n\n        .valor-item .value {\n            font-size: 16px;\n            color: #333;\n            font-weight: bold;\n            margin-top: 4px;\n        }\n\n        .produtos-detalhados {\n            margin-top: 20px;\n            padding-top: 15px;\n            border-top: 1px solid #e0e0e0;\n        }\n\n        .produtos-detalhados h4 {\n            color: #155A87;\n            font-size: 16px;\n            font-weight: 600;\n            margin-bottom: 15px;\n            text-align: center;\n        }\n\n        .tabela-orcamento {\n            width: 100%;\n            border-collapse: collapse;\n            background: white;\n            border-radius: 8px;\n            overflow: hidden;\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n\n        .tabela-orcamento thead {\n            background: linear-gradient(135deg, #155A87, #348EB6);\n            color: white;\n        }\n\n        .tabela-orcamento th {\n            padding: 12px 8px;\n            text-align: left;\n            font-weight: 600;\n            font-size: 12px;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n        }\n\n        .tabela-orcamento td {\n            padding: 10px 8px;\n            border-bottom: 1px solid #f0f0f0;\n            font-size: 13px;\n            vertical-align: middle;\n        }\n\n        .tabela-orcamento tbody tr:hover {\n            background-color: #f8f9fa;\n        }\n\n        .tabela-orcamento tbody tr:last-child td {\n            border-bottom: none;\n        }\n\n        .produto-id {\n            font-weight: bold;\n            color: #155A87;\n            font-size: 11px;\n        }\n\n        .produto-nome {\n            font-weight: 600;\n            color: #333;\n            max-width: 200px;\n            word-wrap: break-word;\n        }\n\n        .produto-marca {\n            background: #f0f0f0;\n            padding: 2px 6px;\n            border-radius: 8px;\n            font-size: 11px;\n            color: #666;\n            display: inline-block;\n        }\n\n        .produto-quantidade {\n            text-align: center;\n            font-weight: 600;\n            color: #333;\n        }\n\n        .produto-preco-unitario {\n            text-align: right;\n            font-weight: 600;\n            color: #333;\n        }\n\n        .produto-preco-total {\n            text-align: right;\n            font-weight: bold;\n            color: #2E7D32;\n            background: #E8F5E8;\n            padding: 4px 8px;\n            border-radius: 4px;\n        }\n\n        .produto-status {\n            text-align: center;\n            font-weight: 600;\n            padding: 2px 6px;\n            border-radius: 4px;\n            font-size: 11px;\n        }\n\n        .status-ok {\n            background: #E8F5E8;\n            color: #2E7D32;\n        }\n\n        .status-divergencia {\n            background: #FFEBEE;\n            color: #D32F2F;\n        }\n\n        .produto-observacoes {\n            font-size: 11px;\n            color: #666;\n            font-style: italic;\n            max-width: 150px;\n            word-wrap: break-word;\n        }\n\n        .tabela-totais {\n            margin-top: 15px;\n            background: #f8f9fa;\n            border-radius: 8px;\n            padding: 15px;\n        }\n\n        .linha-total {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 8px;\n        }\n\n        .linha-total:last-child {\n            margin-bottom: 0;\n            padding-top: 8px;\n            border-top: 2px solid #155A87;\n            font-weight: bold;\n            font-size: 16px;\n            color: #155A87;\n        }\n\n        .label-total {\n            font-weight: 600;\n            color: #333;\n        }\n\n        .valor-total {\n            font-weight: bold;\n            color: #2E7D32;\n        }\n\n        @media (max-width: 768px) {\n            .tabela-orcamento {\n                font-size: 11px;\n            }\n\n            .tabela-orcamento th,\n            .tabela-orcamento td {\n                padding: 8px 4px;\n            }\n\n            .produto-nome {\n                max-width: 120px;\n            }\n\n            .produto-observacoes {\n                max-width: 100px;\n            }\n        }\n\n        .footer-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-top: 20px;\n            padding-top: 15px;\n            border-top: 1px solid #e9ecef;\n            font-size: 12px;\n            color: #6c757d;\n        }\n\n        .loading {\n            text-align: center;\n            padding: 40px;\n            color: #666;\n        }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: #999;\n        }\n\n        .no-data h3 {\n            margin-bottom: 10px;\n            color: #666;\n        }\n\n        @media (max-width: 768px) {\n            .info-grid {\n                grid-template-columns: 1fr;\n            }\n\n            .card-header {\n                flex-direction: column;\n                align-items: flex-start;\n                gap: 10px;\n            }\n\n            .valor-info {\n                justify-content: center;\n            }\n\n            .footer-info {\n                flex-direction: column;\n                gap: 10px;\n                text-align: center;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>üîß Sistema de Manuten√ß√£o de Frotas</h1>\n            <p>Lista de Solicita√ß√µes de Manuten√ß√£o</p>\n        </div>\n\n        <div id=\"solicitacoes-container\">\n            <!-- Os dados ser√£o inseridos dinamicamente aqui -->\n        </div>\n    </div>\n\n    <script>\n        // Fun√ß√£o para formatar data\n        function formatarData(dataISO) {\n            if (!dataISO) return 'N/A';\n            const data = new Date(dataISO);\n            return data.toLocaleDateString('pt-BR', {\n                day: '2-digit',\n                month: '2-digit',\n                year: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit'\n            });\n        }\n\n        // Fun√ß√£o para formatar moeda\n        function formatarMoeda(valor) {\n            if (!valor && valor !== 0) return 'R$ 0,00';\n            return new Intl.NumberFormat('pt-BR', {\n                style: 'currency',\n                currency: 'BRL'\n            }).format(valor);\n        }\n\n        // Fun√ß√£o para obter classe CSS do status\n        function getStatusClass(status) {\n            switch(status?.toLowerCase()) {\n                case 'em aberto':\n                case 'aberto':\n                    return 'status-aberto';\n                case 'aprovado':\n                case 'aprovada':\n                    return 'status-aprovado';\n                case 'reprovado':\n                case 'reprovada':\n                    return 'status-reprovado';\n                default:\n                    return 'status-aberto';\n            }\n        }\n\n        // Dados din√¢micos do Appsmith (vari√°veis substitu√≠das pelo Appsmith em runtime)\n        // eslint-disable-next-line\n        const solicitacao = {\n            \"solicitacao_id\": \"{{mfs_list.selectedItem.solicitacao_id}}\",\n            \"placa\": \"{{mfs_list.selectedItem.placa}}\",\n            \"odometro_atual\": {{mfs_list.selectedItem.odometro_atual}},\n            \"odometro_prox_troca\": {{mfs_list.selectedItem.odometro_prox_troca}},\n            \"data_prox_manutencao\": \"{{mfs_list.selectedItem.data_prox_manutencao}}\",\n            \"cidade\": \"{{mfs_list.selectedItem.cidade}}\",\n            \"criado_por\": \"{{mfs_list.selectedItem.criado_por}}\",\n            \"servico\": \"{{mfs_list.selectedItem.servico}}\",\n            \"status\": \"{{mfs_list.selectedItem.status}}\",\n            \"motivo_reprovacao\": \"{{mfs_list.selectedItem.motivo_reprovacao}}\",\n            \"data_abertura\": \"{{mfs_list.selectedItem.data_abertura}}\",\n            \"id_solicitacao\": \"{{mfs_list.selectedItem.id_solicitacao}}\",\n            \"filial_id\": \"{{mfs_list.selectedItem.filial_id}}\",\n            \"id_solicitante\": \"{{mfs_list.selectedItem.id_solicitante}}\",\n            \"nome_solicitante\": \"{{mfs_list.selectedItem.nome_solicitante}}\",\n            \"link_orcamento_pdf\": \"{{mfs_list.selectedItem.link_orcamento_pdf}}\",\n            \"link_fotos_orcamento\": \"{{mfs_list.selectedItem.link_fotos_orcamento}}\",\n            \"observacoes\": \"{{mfs_list.selectedItem.observacoes}}\",\n            \"quantidade_produtos\": {{mfs_list.selectedItem.quantidade_produtos}},\n            \"valor_total_produtos\": {{mfs_list.selectedItem.valor_total_produtos}},\n            \"valor_medio_produtos\": {{mfs_list.selectedItem.valor_medio_produtos}},\n            \"menor_preco_produto\": {{mfs_list.selectedItem.menor_preco_produto}},\n            \"maior_preco_produto\": {{mfs_list.selectedItem.maior_preco_produto}},\n            \"lista_produtos\": \"{{mfs_list.selectedItem.lista_produtos}}\",\n            \"lista_marcas\": \"{{mfs_list.selectedItem.lista_marcas}}\"\n        };\n\n        // Fun√ß√£o para renderizar uma solicita√ß√£o\n        function renderizarSolicitacao() {\n\n            return `\n                <div class=\"solicitacao-card\">\n                    <div class=\"card-header\">\n                        <div class=\"placa-info\">\n                            <div class=\"placa-badge\">${solicitacao.placa || 'N/A'}</div>\n                            <div>\n                                <strong>ID:</strong> ${solicitacao.solicitacao_id || solicitacao.id_solicitacao || 'N/A'}\n                            </div>\n                        </div>\n                        <div class=\"status-badge ${getStatusClass(solicitacao.status)}\">\n                            ${solicitacao.status || 'Em aberto'}\n                        </div>\n                    </div>\n\n                    <div class=\"info-grid\">\n                        <div class=\"info-section\">\n                            <h3>üìä Od√¥metro</h3>\n                            <p><strong>Atual:</strong> ${solicitacao.odometro_atual?.toLocaleString('pt-BR') || 'N/A'} km</p>\n                            <p><strong>Pr√≥xima troca:</strong> ${solicitacao.odometro_prox_troca?.toLocaleString('pt-BR') || 'N/A'} km</p>\n                        </div>\n\n                        <div class=\"info-section\">\n                            <h3>üìç Localiza√ß√£o</h3>\n                            <p><strong>Cidade:</strong> ${solicitacao.cidade || 'N/A'}</p>\n                            <p><strong>Filial ID:</strong> ${solicitacao.filial_id || 'N/A'}</p>\n                        </div>\n\n                        <div class=\"info-section\">\n                            <h3>üë§ Solicitante</h3>\n                            <p><strong>Nome:</strong> ${solicitacao.nome_solicitante || solicitacao.criado_por || 'N/A'}</p>\n                            <p><strong>ID:</strong> ${solicitacao.id_solicitante || 'N/A'}</p>\n                        </div>\n\n                        <div class=\"info-section\">\n                            <h3>üìÖ Datas</h3>\n                            <p><strong>Abertura:</strong> ${formatarData(solicitacao.data_abertura)}</p>\n                            <p><strong>Pr√≥xima manuten√ß√£o:</strong> ${formatarData(solicitacao.data_prox_manutencao)}</p>\n                        </div>\n                    </div>\n\n                    <div class=\"servico-section\">\n                        <h3>üîß Servi√ßos Solicitados</h3>\n                        <p>${solicitacao.servico || 'Nenhum servi√ßo especificado'}</p>\n                    </div>\n\n                    <div class=\"produtos-section\">\n                        <h3>üì¶ Produtos</h3>\n                        <p><strong>Lista:</strong> ${solicitacao.lista_produtos || 'Nenhum produto especificado'}</p>\n                        <p><strong>Marcas:</strong> ${solicitacao.lista_marcas || 'N/A'}</p>\n\n                        <div class=\"valor-info\">\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Quantidade</div>\n                                <div class=\"value\">${solicitacao.quantidade_produtos || 0}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Valor Total</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.valor_total_produtos)}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Valor M√©dio</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.valor_medio_produtos)}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Menor Pre√ßo</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.menor_preco_produto)}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Maior Pre√ßo</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.maior_preco_produto)}</div>\n                            </div>\n                        </div>\n\n                        <!-- Se√ß√£o de produtos detalhados -->\n                        <div class=\"produtos-detalhados\">\n                            <h4>üìã Or√ßamento Detalhado</h4>\n                            <div id=\"tabela-produtos-container\">\n                                ${renderizarTabelaProdutos()}\n                            </div>\n                        </div>\n                    </div>\n\n                    ${solicitacao.observacoes ? `\n                        <div class=\"info-section\">\n                            <h3>üìù Observa√ß√µes</h3>\n                            <p>${solicitacao.observacoes}</p>\n                        </div>\n                    ` : ''}\n\n                    ${solicitacao.motivo_reprovacao ? `\n                        <div class=\"info-section\" style=\"border-left-color: #dc3545;\">\n                            <h3>‚ùå Motivo da Reprova√ß√£o</h3>\n                            <p>${solicitacao.motivo_reprovacao}</p>\n                        </div>\n                    ` : ''}\n\n                    <div class=\"footer-info\">\n                        <div>\n                            <strong>Links:</strong>\n                            ${solicitacao.link_orcamento_pdf ? `<a href=\"${solicitacao.link_orcamento_pdf}\" target=\"_blank\">PDF</a>` : 'N/A'} |\n                            ${solicitacao.link_fotos_orcamento ? `<a href=\"${solicitacao.link_fotos_orcamento}\" target=\"_blank\">Fotos</a>` : 'N/A'}\n                        </div>\n                        <div>\n                            √öltima atualiza√ß√£o: ${formatarData(new Date().toISOString())}\n                        </div>\n                    </div>\n                </div>\n            `;\n        }\n\n        // Fun√ß√£o para renderizar tabela de produtos com dados din√¢micos do Appsmith\n        function renderizarTabelaProdutos() {\n            return `\n                <table class=\"tabela-orcamento\">\n                    <thead>\n                        <tr>\n                            <th>ID</th>\n                            <th>Produto</th>\n                            <th>Marca</th>\n                            <th>Qtd</th>\n                            <th>Pre√ßo Unit.</th>\n                            <th>Total</th>\n                            <th>Status</th>\n                            <th>Observa√ß√µes</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{produtos_mf.data.map(p => '<tr style=\"border-bottom:1px solid #f0f0f0;\"><td class=\"produto-id\">' + p.produto_id + '</td><td class=\"produto-nome\">' + p.nome_produto + '</td><td><span class=\"produto-marca\">' + p.marca + '</span></td><td class=\"produto-quantidade\">' + p.quantidade + '</td><td class=\"produto-preco-unitario\">R$ ' + Number(p.preco_unitario).toFixed(2).replace('.', ',') + '</td><td class=\"produto-preco-total\">R$ ' + Number(p.preco_total).toFixed(2).replace('.', ',') + '</td><td><span class=\"produto-status ' + (p.status_calculo === 'OK' ? 'status-ok' : 'status-divergencia') + '\">' + p.status_calculo + '</span></td><td class=\"produto-observacoes\">' + (p.observacoes_produto || '-') + '</td></tr>').join('')}}\n                    </tbody>\n                </table>\n\n                <div class=\"tabela-totais\">\n                    <div class=\"linha-total\">\n                        <span class=\"label-total\">Total de Produtos:</span>\n                        <span class=\"valor-total\">{{produtos_mf.data.length}}</span>\n                    </div>\n                    <div class=\"linha-total\">\n                        <span class=\"label-total\">Total de Itens:</span>\n                        <span class=\"valor-total\">{{produtos_mf.data.reduce((sum, p) => sum + p.quantidade, 0)}}</span>\n                    </div>\n                    <div class=\"linha-total\">\n                        <span class=\"label-total\">Valor Total do Or√ßamento:</span>\n                        <span class=\"valor-total\">R$ {{produtos_mf.data.reduce((sum, p) => sum + p.preco_total, 0).toFixed(2).replace('.', ',')}}</span>\n                    </div>\n                </div>\n            `;\n        }\n\n        // Renderizar quando a p√°gina carregar\n        document.addEventListener('DOMContentLoaded', function() {\n            const container = document.getElementById('solicitacoes-container');\n            container.innerHTML = renderizarSolicitacao();\n        });\n    </script>\n</body>\n</html>",
  "topRow": 0,
  "type": "IFRAME_WIDGET",
  "version": 1,
  "widgetId": "6eucoswnio",
  "widgetName": "mf_detalhes_iframe"
}
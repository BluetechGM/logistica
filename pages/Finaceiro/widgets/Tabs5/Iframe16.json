{
  "animateLoading": true,
  "borderOpacity": 100,
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": 1,
  "bottomRow": 146,
  "boxShadow": "{{appsmith.theme.boxShadow.appBoxShadow}}",
  "dynamicBindingPathList": [
    {
      "key": "borderRadius"
    },
    {
      "key": "boxShadow"
    },
    {
      "key": "srcDoc"
    }
  ],
  "dynamicTriggerPathList": [],
  "flexVerticalAlignment": "start",
  "isLoading": false,
  "isVisible": true,
  "key": "dkkqkjdosm",
  "leftColumn": 1,
  "mobileBottomRow": 34,
  "mobileLeftColumn": 1,
  "mobileRightColumn": 25,
  "mobileTopRow": 2,
  "needsErrorInfo": false,
  "parentColumnSpace": 17.08984375,
  "parentId": "rv4lmpv6cp",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "responsiveBehavior": "fill",
  "rightColumn": 64,
  "source": "https://www.example.com",
  "srcDoc": "<style>\n    .lista-wrap {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;\n        background: #f9fafb;\n        padding: 20px;\n        border-radius: 16px;\n    }\n\n    /* Header e T√≠tulo */\n    .lista-header {\n        background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n        color: white;\n        padding: 24px;\n        border-radius: 12px;\n        margin-bottom: 20px;\n        box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);\n    }\n    .lista-header h1 {\n        margin: 0 0 8px 0;\n        font-size: 28px;\n        font-weight: 900;\n        display: flex;\n        align-items: center;\n        gap: 10px;\n    }\n    .lista-header p {\n        margin: 0;\n        opacity: 0.9;\n        font-size: 14px;\n    }\n\n    /* Painel de Filtros */\n    .painel-filtros {\n        background: white;\n        border-radius: 12px;\n        padding: 24px;\n        margin-bottom: 20px;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.06);\n        border: 2px solid #e5e7eb;\n    }\n    .painel-filtros h2 {\n        margin: 0 0 20px 0;\n        font-size: 18px;\n        font-weight: 800;\n        color: #1e40af;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n    .filtros-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n        gap: 16px;\n        margin-bottom: 16px;\n    }\n    .filtro-grupo {\n        display: flex;\n        flex-direction: column;\n        gap: 6px;\n    }\n    .filtro-label {\n        font-size: 12px;\n        font-weight: 700;\n        color: #6b7280;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n    }\n    .filtro-input, .filtro-select {\n        padding: 10px 12px;\n        border: 2px solid #e5e7eb;\n        border-radius: 8px;\n        font-size: 14px;\n        font-family: inherit;\n        transition: all 0.2s;\n        background: white;\n    }\n    .filtro-input:focus, .filtro-select:focus {\n        outline: none;\n        border-color: #3b82f6;\n        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n    .filtro-input::placeholder {\n        color: #9ca3af;\n    }\n    .filtros-acoes {\n        display: flex;\n        gap: 12px;\n        justify-content: flex-end;\n        padding-top: 16px;\n        border-top: 1px solid #e5e7eb;\n    }\n    .btn-limpar, .btn-aplicar {\n        padding: 12px 24px;\n        border: none;\n        border-radius: 8px;\n        font-size: 14px;\n        font-weight: 700;\n        cursor: pointer;\n        transition: all 0.2s;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n    .btn-limpar {\n        background: #f3f4f6;\n        color: #374151;\n    }\n    .btn-limpar:hover {\n        background: #e5e7eb;\n    }\n    .btn-aplicar {\n        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n        color: white;\n        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n    }\n    .btn-aplicar:hover {\n        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);\n        transform: translateY(-2px);\n        box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);\n    }\n    .btn-aplicar:active {\n        transform: translateY(0);\n    }\n    .btn-aplicar.processando {\n        opacity: 0.7;\n        cursor: wait;\n    }\n    .btn-aplicar.processando::after {\n        content: ' ‚è≥';\n    }\n\n    /* √Årea de Filtros Ativos */\n    .filtros-info {\n        background: white;\n        border-radius: 12px;\n        padding: 16px 20px;\n        margin-bottom: 20px;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.06);\n        border-left: 4px solid #3b82f6;\n    }\n    .filtros-info h3 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        font-weight: 800;\n        color: #6b7280;\n        text-transform: uppercase;\n    }\n    .filtros-tags {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n    }\n    .filtro-tag {\n        background: #dbeafe;\n        color: #1e40af;\n        padding: 6px 12px;\n        border-radius: 999px;\n        font-size: 12px;\n        font-weight: 700;\n        display: flex;\n        align-items: center;\n        gap: 6px;\n    }\n\n    /* Resultados Info */\n    .resultados-info {\n        background: white;\n        padding: 16px 20px;\n        border-radius: 12px;\n        margin-bottom: 20px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.04);\n        border-left: 4px solid #10b981;\n    }\n    .resultados-texto {\n        font-size: 14px;\n        font-weight: 700;\n        color: #374151;\n    }\n    .resultados-total {\n        font-size: 20px;\n        font-weight: 900;\n        color: #10b981;\n    }\n\n    /* Controles de Pagina√ß√£o */\n    .paginacao-controles {\n        background: white;\n        padding: 16px 20px;\n        border-radius: 12px;\n        margin-bottom: 20px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.04);\n        border: 1px solid #e5e7eb;\n    }\n    .paginacao-info {\n        font-size: 14px;\n        font-weight: 700;\n        color: #6b7280;\n    }\n\n    /* Tabela */\n    .tabela-container {\n        background: white;\n        border-radius: 12px;\n        overflow: hidden;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.06);\n        border: 1px solid #e5e7eb;\n    }\n    table {\n        width: 100%;\n        border-collapse: collapse;\n    }\n    thead {\n        background: linear-gradient(to right, #f9fafb, #f3f4f6);\n    }\n    th {\n        padding: 16px 12px;\n        text-align: left;\n        font-size: 11px;\n        font-weight: 800;\n        color: #6b7280;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        border-bottom: 2px solid #e5e7eb;\n    }\n    td {\n        padding: 16px 12px;\n        border-bottom: 1px solid #f3f4f6;\n        font-size: 13px;\n        vertical-align: middle;\n    }\n    tbody tr {\n        transition: all 0.2s;\n    }\n    tbody tr:hover {\n        background: #f9fafb;\n        transform: translateX(2px);\n    }\n\n    /* Status Tags */\n    .status-tag {\n        display: inline-block;\n        padding: 6px 12px;\n        border-radius: 999px;\n        font-size: 11px;\n        font-weight: 800;\n        letter-spacing: 0.3px;\n        text-transform: uppercase;\n    }\n    .status-aprovado { background: #d1fae5; color: #065f46; border: 1px solid #a7f3d0; }\n    .status-reprovado { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }\n    .status-pendente { background: #fef3c7; color: #92400e; border: 1px solid #fde68a; }\n\n    /* Miniaturas de Documentos */\n    .docs-grid {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n    }\n    .doc-thumb {\n        position: relative;\n        width: 60px;\n        height: 60px;\n        border-radius: 8px;\n        overflow: hidden;\n        border: 2px solid #e5e7eb;\n        cursor: pointer;\n        transition: all 0.2s;\n        background: #f9fafb;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .doc-thumb:hover {\n        transform: scale(1.1);\n        border-color: #3b82f6;\n        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n        z-index: 10;\n    }\n    .doc-thumb img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n    }\n    .doc-icon {\n        font-size: 24px;\n    }\n    .doc-label {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background: rgba(0,0,0,0.8);\n        color: white;\n        font-size: 8px;\n        text-align: center;\n        padding: 2px;\n        font-weight: 700;\n    }\n    .sem-docs {\n        color: #9ca3af;\n        font-style: italic;\n        font-size: 12px;\n    }\n\n    /* Valor Formatado */\n    .valor {\n        font-weight: 800;\n        color: #059669;\n        font-variant-numeric: tabular-nums;\n        font-size: 14px;\n    }\n\n    /* ID Badge */\n    .id-badge {\n        background: #f3f4f6;\n        color: #6b7280;\n        padding: 4px 8px;\n        border-radius: 6px;\n        font-family: 'Courier New', monospace;\n        font-size: 11px;\n        font-weight: 700;\n    }\n\n    /* Info Cell */\n    .info-principal {\n        font-weight: 700;\n        color: #111827;\n        margin-bottom: 4px;\n    }\n    .info-secundaria {\n        color: #9ca3af;\n        font-size: 11px;\n    }\n\n    /* Estado Vazio */\n    .estado-vazio {\n        text-align: center;\n        padding: 60px 20px;\n        color: #9ca3af;\n    }\n    .estado-vazio-icon {\n        font-size: 64px;\n        margin-bottom: 16px;\n        opacity: 0.5;\n    }\n    .estado-vazio-texto {\n        font-size: 18px;\n        font-weight: 700;\n        margin-bottom: 8px;\n    }\n    .estado-vazio-sub {\n        font-size: 14px;\n        opacity: 0.8;\n    }\n\n    /* Responsivo */\n    @media (max-width: 768px) {\n        .lista-wrap { padding: 12px; }\n        .tabela-container { overflow-x: auto; }\n        table { min-width: 800px; }\n        .doc-thumb { width: 50px; height: 50px; }\n        .paginacao-controles { flex-direction: column; gap: 12px; }\n    }\n</style>\n\n<div class=\"lista-wrap\">\n    <!-- Header -->\n    <div class=\"lista-header\">\n        <h1>üìã Hist√≥rico Completo de Solicita√ß√µes</h1>\n        <p>Visualiza√ß√£o detalhada com filtros e miniaturas de documentos</p>\n    </div>\n\n    <!-- Painel de Filtros -->\n    <div class=\"painel-filtros\">\n        <h2>üîç Filtros de Busca</h2>\n        \n        <div class=\"filtros-grid\">\n            <!-- ID -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üÜî ID Solicita√ß√£o</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_id\" placeholder=\"Ex: 123\">\n            </div>\n            \n            <!-- Status -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üîñ Status</label>\n                <select class=\"filtro-select\" id=\"filtro_status\">\n                    <option value=\"Todos\">Todos</option>\n                    <option value=\"Aprovado\">Aprovado</option>\n                    <option value=\"Reprovado\">Reprovado</option>\n                    <option value=\"Em aberto\">Em aberto</option>\n                </select>\n            </div>\n            \n            <!-- Placa -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üèçÔ∏è Placa</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_placa\" placeholder=\"Ex: ABC1234\">\n            </div>\n            \n            <!-- Filial -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üè¢ Filial</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_filial\" placeholder=\"Ex: S√£o Paulo\">\n            </div>\n            \n            <!-- Tipo Incidente -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üîß Tipo Incidente</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_tipo_incidente\" placeholder=\"Ex: Manuten√ß√£o\">\n            </div>\n            \n            <!-- Solicitante -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üë§ Solicitante</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_solicitante\" placeholder=\"Ex: Jo√£o Silva\">\n            </div>\n            \n            <!-- Servi√ßo -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üî® Servi√ßo</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_servico\" placeholder=\"Ex: Troca de √≥leo\">\n            </div>\n            \n            <!-- Produto -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üî© Produto</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_produto\" placeholder=\"Ex: √ìleo\">\n            </div>\n            \n            <!-- Marca -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üè∑Ô∏è Marca</label>\n                <input type=\"text\" class=\"filtro-input\" id=\"filtro_marca\" placeholder=\"Ex: Castrol\">\n            </div>\n            \n            <!-- Data In√≠cio -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üìÖ Data In√≠cio</label>\n                <input type=\"date\" class=\"filtro-input\" id=\"filtro_data_inicio\">\n            </div>\n            \n            <!-- Data Fim -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üìÖ Data Fim</label>\n                <input type=\"date\" class=\"filtro-input\" id=\"filtro_data_fim\">\n            </div>\n            \n            <!-- Valor M√≠nimo -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üí∞ Valor M√≠nimo</label>\n                <input type=\"number\" class=\"filtro-input\" id=\"filtro_valor_min\" placeholder=\"Ex: 100.00\" step=\"0.01\">\n            </div>\n            \n            <!-- Valor M√°ximo -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üí∞ Valor M√°ximo</label>\n                <input type=\"number\" class=\"filtro-input\" id=\"filtro_valor_max\" placeholder=\"Ex: 5000.00\" step=\"0.01\">\n            </div>\n            \n            <!-- Documentos -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üìÑ Documentos</label>\n                <select class=\"filtro-select\" id=\"filtro_documentos\">\n                    <option value=\"Todos\">Todos</option>\n                    <option value=\"Completo\">Completo (2 NFes)</option>\n                    <option value=\"Incompleto\">Incompleto (1 NFe)</option>\n                    <option value=\"Sem\">Sem documentos</option>\n                </select>\n            </div>\n            \n            <!-- Lan√ßado no Winthor -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üíæ Lan√ßado Winthor</label>\n                <select class=\"filtro-select\" id=\"filtro_lancado_winthor\">\n                    <option value=\"Todos\">Todos</option>\n                    <option value=\"Sim\">Sim</option>\n                    <option value=\"Nao\">N√£o</option>\n                </select>\n            </div>\n            \n            <!-- Limite de Registros -->\n            <div class=\"filtro-grupo\">\n                <label class=\"filtro-label\">üìÑ Registros por p√°gina</label>\n                <select class=\"filtro-select\" id=\"limite_registros\">\n                    <option value=\"10\">10</option>\n                    <option value=\"25\">25</option>\n                    <option value=\"50\">50</option>\n                    <option value=\"100\">100</option>\n                    <option value=\"Todos\">Todos</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"filtros-acoes\">\n            <button class=\"btn-limpar\" id=\"btn-limpar-filtros\">üóëÔ∏è Limpar Filtros</button>\n            <button class=\"btn-aplicar\" id=\"btn-aplicar-filtros\">üîç Aplicar Filtros</button>\n        </div>\n    </div>\n\n    <!-- Filtros Ativos -->\n    {{\n        (()=>{\n            const filtros = [];\n            if (typeof Filtro_ID !== 'undefined' && Filtro_ID?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üÜî ID: #${Filtro_ID.text}</span>`);\n            }\n            if (typeof Filtro_Status !== 'undefined' && Filtro_Status?.selectedOptionValue && Filtro_Status.selectedOptionValue !== 'Todos') {\n                filtros.push(`<span class=\"filtro-tag\">üîñ Status: ${Filtro_Status.selectedOptionLabel}</span>`);\n            }\n            if (typeof Filtro_Placa !== 'undefined' && Filtro_Placa?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üèçÔ∏è Placa: ${Filtro_Placa.text}</span>`);\n            }\n            if (typeof Filtro_Filial !== 'undefined' && Filtro_Filial?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üè¢ Filial: ${Filtro_Filial.text}</span>`);\n            }\n            if (typeof Filtro_Tipo_Incidente !== 'undefined' && Filtro_Tipo_Incidente?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üîß Tipo: ${Filtro_Tipo_Incidente.text}</span>`);\n            }\n            if (typeof Filtro_Solicitante !== 'undefined' && Filtro_Solicitante?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üë§ Solicitante: ${Filtro_Solicitante.text}</span>`);\n            }\n            if (typeof Filtro_Servico !== 'undefined' && Filtro_Servico?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üî® Servi√ßo: ${Filtro_Servico.text}</span>`);\n            }\n            if (typeof Filtro_Produto !== 'undefined' && Filtro_Produto?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üî© Produto: ${Filtro_Produto.text}</span>`);\n            }\n            if (typeof Filtro_Marca !== 'undefined' && Filtro_Marca?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üè∑Ô∏è Marca: ${Filtro_Marca.text}</span>`);\n            }\n            if (typeof Filtro_Data_Inicio !== 'undefined' && Filtro_Data_Inicio?.selectedDate) {\n                filtros.push(`<span class=\"filtro-tag\">üìÖ Desde: ${new Date(Filtro_Data_Inicio.selectedDate).toLocaleDateString('pt-BR')}</span>`);\n            }\n            if (typeof Filtro_Data_Fim !== 'undefined' && Filtro_Data_Fim?.selectedDate) {\n                filtros.push(`<span class=\"filtro-tag\">üìÖ At√©: ${new Date(Filtro_Data_Fim.selectedDate).toLocaleDateString('pt-BR')}</span>`);\n            }\n            if (typeof Filtro_Valor_Min !== 'undefined' && Filtro_Valor_Min?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üí∞ Valor m√≠n: R$ ${Filtro_Valor_Min.text}</span>`);\n            }\n            if (typeof Filtro_Valor_Max !== 'undefined' && Filtro_Valor_Max?.text) {\n                filtros.push(`<span class=\"filtro-tag\">üí∞ Valor m√°x: R$ ${Filtro_Valor_Max.text}</span>`);\n            }\n            if (typeof Filtro_Documentos !== 'undefined' && Filtro_Documentos?.selectedOptionValue && Filtro_Documentos.selectedOptionValue !== 'Todos') {\n                filtros.push(`<span class=\"filtro-tag\">üìÑ Docs: ${Filtro_Documentos.selectedOptionLabel}</span>`);\n            }\n            if (typeof Filtro_Lancado_Winthor !== 'undefined' && Filtro_Lancado_Winthor?.selectedOptionValue && Filtro_Lancado_Winthor.selectedOptionValue !== 'Todos') {\n                filtros.push(`<span class=\"filtro-tag\">üíæ Winthor: ${Filtro_Lancado_Winthor.selectedOptionLabel}</span>`);\n            }\n            \n            if (filtros.length > 0) {\n                return `<div class=\"filtros-info\">\n                    <h3>Filtros Ativos:</h3>\n                    <div class=\"filtros-tags\">${filtros.join('')}</div>\n                </div>`;\n            }\n            return '';\n        })()\n    }}\n\n    <!-- Info de Resultados -->\n    <div class=\"resultados-info\">\n        <div class=\"resultados-texto\">\n            <span>Exibindo</span>\n            <span class=\"resultados-total\" id=\"contador_resultados\">{{\n                (()=>{\n                    const dados = solicitacoes_frota_list?.data || [];\n                    const limite = typeof Limite_Registros !== 'undefined' && Limite_Registros?.selectedOptionValue === 'Todos' ? dados.length : parseInt((typeof Limite_Registros !== 'undefined' ? Limite_Registros?.selectedOptionValue : null) || 10);\n                    \n                    // Aplicar filtros\n                    let filtrados = dados;\n                    \n                    // Filtro ID\n                    if (typeof Filtro_ID !== 'undefined' && Filtro_ID?.text) {\n                        filtrados = filtrados.filter(item => String(item.solicitacao_id||'').includes(Filtro_ID.text));\n                    }\n                    \n                    // Filtro Status\n                    if (typeof Filtro_Status !== 'undefined' && Filtro_Status?.selectedOptionValue && Filtro_Status.selectedOptionValue !== 'Todos') {\n                        filtrados = filtrados.filter(item => item.status === Filtro_Status.selectedOptionValue);\n                    }\n                    \n                    // Filtro Placa\n                    if (typeof Filtro_Placa !== 'undefined' && Filtro_Placa?.text) {\n                        filtrados = filtrados.filter(item => String(item.placa||'').toLowerCase().includes(Filtro_Placa.text.toLowerCase()));\n                    }\n                    \n                    // Filtro Filial\n                    if (typeof Filtro_Filial !== 'undefined' && Filtro_Filial?.text) {\n                        filtrados = filtrados.filter(item => String(item.cidade||'').toLowerCase().includes(Filtro_Filial.text.toLowerCase()));\n                    }\n                    \n                    // Filtro Tipo de Incidente\n                    if (typeof Filtro_Tipo_Incidente !== 'undefined' && Filtro_Tipo_Incidente?.text) {\n                        filtrados = filtrados.filter(item => String(item.tipo_incidente||'').toLowerCase().includes(Filtro_Tipo_Incidente.text.toLowerCase()));\n                    }\n                    \n                    // Filtro Solicitante\n                    if (typeof Filtro_Solicitante !== 'undefined' && Filtro_Solicitante?.text) {\n                        filtrados = filtrados.filter(item => {\n                            const nome = String(item.nome_solicitante||item.criado_por||'').toLowerCase();\n                            return nome.includes(Filtro_Solicitante.text.toLowerCase());\n                        });\n                    }\n                    \n                    // Filtro Servi√ßo\n                    if (typeof Filtro_Servico !== 'undefined' && Filtro_Servico?.text) {\n                        filtrados = filtrados.filter(item => String(item.servico||'').toLowerCase().includes(Filtro_Servico.text.toLowerCase()));\n                    }\n                    \n                    // Filtro Produto\n                    if (typeof Filtro_Produto !== 'undefined' && Filtro_Produto?.text) {\n                        filtrados = filtrados.filter(item => String(item.lista_produtos||'').toLowerCase().includes(Filtro_Produto.text.toLowerCase()));\n                    }\n                    \n                    // Filtro Marca\n                    if (typeof Filtro_Marca !== 'undefined' && Filtro_Marca?.text) {\n                        filtrados = filtrados.filter(item => String(item.lista_marcas||'').toLowerCase().includes(Filtro_Marca.text.toLowerCase()));\n                    }\n                    \n                    // Filtro Data In√≠cio\n                    if (typeof Filtro_Data_Inicio !== 'undefined' && Filtro_Data_Inicio?.selectedDate) {\n                        filtrados = filtrados.filter(item => {\n                            if (!item.data_abertura) return false;\n                            const dataItem = new Date(item.data_abertura);\n                            const dataInicio = new Date(Filtro_Data_Inicio.selectedDate);\n                            dataInicio.setHours(0,0,0,0);\n                            return dataItem >= dataInicio;\n                        });\n                    }\n                    \n                    // Filtro Data Fim\n                    if (typeof Filtro_Data_Fim !== 'undefined' && Filtro_Data_Fim?.selectedDate) {\n                        filtrados = filtrados.filter(item => {\n                            if (!item.data_abertura) return false;\n                            const dataItem = new Date(item.data_abertura);\n                            const dataFim = new Date(Filtro_Data_Fim.selectedDate);\n                            dataFim.setHours(23,59,59,999);\n                            return dataItem <= dataFim;\n                        });\n                    }\n                    \n                    // Filtro Valor M√≠nimo\n                    if (typeof Filtro_Valor_Min !== 'undefined' && Filtro_Valor_Min?.text) {\n                        const valorMin = parseFloat(Filtro_Valor_Min.text);\n                        if (!isNaN(valorMin)) {\n                            filtrados = filtrados.filter(item => Number(item.valor_total_produtos||0) >= valorMin);\n                        }\n                    }\n                    \n                    // Filtro Valor M√°ximo\n                    if (typeof Filtro_Valor_Max !== 'undefined' && Filtro_Valor_Max?.text) {\n                        const valorMax = parseFloat(Filtro_Valor_Max.text);\n                        if (!isNaN(valorMax)) {\n                            filtrados = filtrados.filter(item => Number(item.valor_total_produtos||0) <= valorMax);\n                        }\n                    }\n                    \n                    // Filtro Documentos\n                    if (typeof Filtro_Documentos !== 'undefined' && Filtro_Documentos?.selectedOptionValue && Filtro_Documentos.selectedOptionValue !== 'Todos') {\n                        filtrados = filtrados.filter(item => {\n                            const temDoc = (url) => url && url !== 'null' && url !== 'comprovante n√£o anexado' && url !== '';\n                            const temNfeServico = temDoc(item.nfe_servico_pdf);\n                            const temNfeProdutos = temDoc(item.nfe_produtos_pdf);\n                            \n                            if (Filtro_Documentos.selectedOptionValue === 'Completo') {\n                                return temNfeServico && temNfeProdutos;\n                            } else if (Filtro_Documentos.selectedOptionValue === 'Incompleto') {\n                                return (temNfeServico && !temNfeProdutos) || (!temNfeServico && temNfeProdutos);\n                            } else if (Filtro_Documentos.selectedOptionValue === 'Sem') {\n                                return !temNfeServico && !temNfeProdutos;\n                            }\n                            return true;\n                        });\n                    }\n                    \n                    // Filtro Lan√ßado no Winthor\n                    if (typeof Filtro_Lancado_Winthor !== 'undefined' && Filtro_Lancado_Winthor?.selectedOptionValue && Filtro_Lancado_Winthor.selectedOptionValue !== 'Todos') {\n                        filtrados = filtrados.filter(item => {\n                            if (Filtro_Lancado_Winthor.selectedOptionValue === 'Sim') {\n                                return item.lancado_winthor === true;\n                            } else if (Filtro_Lancado_Winthor.selectedOptionValue === 'Nao') {\n                                return !item.lancado_winthor || item.lancado_winthor === false;\n                            }\n                            return true;\n                        });\n                    }\n                    \n                    return Math.min(limite, filtrados.length);\n                })()\n            }}</span>\n            <span>de</span>\n            <span class=\"resultados-total\" id=\"total_filtrados\">{{\n                (()=>{\n                    const dados = solicitacoes_frota_list?.data || [];\n                    let filtrados = dados;\n                    \n                    if (typeof Filtro_ID !== 'undefined' && Filtro_ID?.text) {\n                        filtrados = filtrados.filter(item => String(item.solicitacao_id||'').includes(Filtro_ID.text));\n                    }\n                    if (typeof Filtro_Status !== 'undefined' && Filtro_Status?.selectedOptionValue && Filtro_Status.selectedOptionValue !== 'Todos') {\n                        filtrados = filtrados.filter(item => item.status === Filtro_Status.selectedOptionValue);\n                    }\n                    if (typeof Filtro_Placa !== 'undefined' && Filtro_Placa?.text) {\n                        filtrados = filtrados.filter(item => String(item.placa||'').toLowerCase().includes(Filtro_Placa.text.toLowerCase()));\n                    }\n                    if (typeof Filtro_Filial !== 'undefined' && Filtro_Filial?.text) {\n                        filtrados = filtrados.filter(item => String(item.cidade||'').toLowerCase().includes(Filtro_Filial.text.toLowerCase()));\n                    }\n                    \n                    return filtrados.length;\n                })()\n            }}</span>\n            <span>solicita√ß√µes</span>\n        </div>\n        <div class=\"resultados-texto\">\n            <span>Total: </span>\n            <span class=\"resultados-total\" id=\"valor_total\">{{\n                (()=>{\n                    const dados = solicitacoes_frota_list?.data || [];\n                    let filtrados = dados;\n                    \n                    if (typeof Filtro_ID !== 'undefined' && Filtro_ID?.text) {\n                        filtrados = filtrados.filter(item => String(item.solicitacao_id||'').includes(Filtro_ID.text));\n                    }\n                    if (typeof Filtro_Status !== 'undefined' && Filtro_Status?.selectedOptionValue && Filtro_Status.selectedOptionValue !== 'Todos') {\n                        filtrados = filtrados.filter(item => item.status === Filtro_Status.selectedOptionValue);\n                    }\n                    if (typeof Filtro_Placa !== 'undefined' && Filtro_Placa?.text) {\n                        filtrados = filtrados.filter(item => String(item.placa||'').toLowerCase().includes(Filtro_Placa.text.toLowerCase()));\n                    }\n                    if (typeof Filtro_Filial !== 'undefined' && Filtro_Filial?.text) {\n                        filtrados = filtrados.filter(item => String(item.cidade||'').toLowerCase().includes(Filtro_Filial.text.toLowerCase()));\n                    }\n                    \n                    const valorTotal = filtrados.reduce((sum, item) => sum + Number(item.valor_total_produtos || 0), 0);\n                    return 'R$ ' + valorTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2});\n                })()\n            }}</span>\n        </div>\n    </div>\n\n    <!-- Controles de Pagina√ß√£o -->\n    <div class=\"paginacao-controles\">\n        <div class=\"paginacao-info\">\n            üìÑ Registros por p√°gina: <strong>{{ (typeof Limite_Registros !== 'undefined' ? Limite_Registros?.selectedOptionLabel : null) || '10' }}</strong>\n        </div>\n    </div>\n\n    <!-- Tabela -->\n    <div class=\"tabela-container\">\n        <table>\n            <thead>\n                <tr>\n                    <th>ID</th>\n                    <th>Data/Hora</th>\n                    <th>Placa</th>\n                    <th>Filial</th>\n                    <th>Tipo Incidente</th>\n                    <th>Produtos</th>\n                    <th>Status</th>\n                    <th>Valor</th>\n                    <th>Documentos</th>\n                </tr>\n            </thead>\n            <tbody id=\"tabela_resultados\">\n                {{\n                    (()=>{\n                        const dados = solicitacoes_frota_list?.data || [];\n                        const limite = 10;\n                        \n                        // Aplicar filtros\n                        let filtrados = dados;\n                        \n                        if (typeof Filtro_ID !== 'undefined' && Filtro_ID?.text) {\n                            filtrados = filtrados.filter(item => String(item.solicitacao_id||'').includes(Filtro_ID.text));\n                        }\n                        if (typeof Filtro_Status !== 'undefined' && Filtro_Status?.selectedOptionValue && Filtro_Status.selectedOptionValue !== 'Todos') {\n                            filtrados = filtrados.filter(item => item.status === Filtro_Status.selectedOptionValue);\n                        }\n                        if (typeof Filtro_Placa !== 'undefined' && Filtro_Placa?.text) {\n                            filtrados = filtrados.filter(item => String(item.placa||'').toLowerCase().includes(Filtro_Placa.text.toLowerCase()));\n                        }\n                        if (typeof Filtro_Filial !== 'undefined' && Filtro_Filial?.text) {\n                            filtrados = filtrados.filter(item => String(item.cidade||'').toLowerCase().includes(Filtro_Filial.text.toLowerCase()));\n                        }\n                        \n                        // Ordenar e limitar\n                        const registros = filtrados\n                            .sort((a, b) => new Date(b.data_abertura || 0) - new Date(a.data_abertura || 0))\n                            .slice(0, limite);\n                        \n                        if (registros.length === 0) {\n                            return `<tr>\n                                <td colspan=\"9\" class=\"estado-vazio\">\n                                    <div class=\"estado-vazio-icon\">üîç</div>\n                                    <div class=\"estado-vazio-texto\">Nenhuma solicita√ß√£o encontrada</div>\n                                    <div class=\"estado-vazio-sub\">Tente ajustar os filtros ou verifique os dados da query</div>\n                                </td>\n                            </tr>`;\n                        }\n                        \n                        return registros.map(item => {\n                            const data = item.data_abertura ? new Date(item.data_abertura).toLocaleDateString('pt-BR', {day:'2-digit', month:'2-digit', year:'2-digit'}) : '-';\n                            const hora = item.data_abertura ? new Date(item.data_abertura).toLocaleTimeString('pt-BR', {hour:'2-digit', minute:'2-digit'}) : '';\n                            \n                            const statusClass = item.status === 'Aprovado' ? 'status-aprovado' : \n                                               item.status === 'Reprovado' ? 'status-reprovado' : 'status-pendente';\n                            \n                            const valor = Number(item.valor_total_produtos || 0);\n                            const valorFormatado = valor.toLocaleString('pt-BR', {minimumFractionDigits: 2});\n                            \n                            const produtos = String(item.lista_produtos || '-').split(',').slice(0, 2).join(', ');\n                            const qtdProdutos = item.quantidade_produtos || 0;\n                            const maisProds = String(item.lista_produtos||'').split(',').length > 2 ? '...' : '';\n                            \n                            // Fun√ß√£o auxiliar\n                            const temDoc = (url) => url && url !== 'null' && url !== 'comprovante n√£o anexado' && url !== '';\n                            \n                            // Documentos\n                            let docsHtml = '';\n                            \n                            if (temDoc(item.link_orcamento_pdf)) {\n                                const isImg = item.link_orcamento_pdf.match(/\\\\.(jpg|jpeg|png|gif|webp)/i);\n                                if (isImg) {\n                                    docsHtml += `<a href=\"${item.link_orcamento_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"Or√ßamento\"><img src=\"${item.link_orcamento_pdf}\" alt=\"Or√ßamento\"><div class=\"doc-label\">Or√ß</div></a>`;\n                                } else {\n                                    docsHtml += `<a href=\"${item.link_orcamento_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"Or√ßamento\"><div class=\"doc-icon\">üìÑ</div><div class=\"doc-label\">Or√ß</div></a>`;\n                                }\n                            }\n                            \n                            if (temDoc(item.nfe_servico_pdf)) {\n                                const isImg = item.nfe_servico_pdf.match(/\\\\.(jpg|jpeg|png|gif|webp)/i);\n                                if (isImg) {\n                                    docsHtml += `<a href=\"${item.nfe_servico_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Servi√ßo\"><img src=\"${item.nfe_servico_pdf}\" alt=\"NF Servi√ßo\"><div class=\"doc-label\">NF-Sv</div></a>`;\n                                } else {\n                                    docsHtml += `<a href=\"${item.nfe_servico_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Servi√ßo\"><div class=\"doc-icon\">üìÉ</div><div class=\"doc-label\">NF-Sv</div></a>`;\n                                }\n                            }\n                            \n                            if (temDoc(item.nfe_produtos_pdf)) {\n                                const isImg = item.nfe_produtos_pdf.match(/\\\\.(jpg|jpeg|png|gif|webp)/i);\n                                if (isImg) {\n                                    docsHtml += `<a href=\"${item.nfe_produtos_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Produtos\"><img src=\"${item.nfe_produtos_pdf}\" alt=\"NF Produtos\"><div class=\"doc-label\">NF-Pd</div></a>`;\n                                } else {\n                                    docsHtml += `<a href=\"${item.nfe_produtos_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Produtos\"><div class=\"doc-icon\">üìÉ</div><div class=\"doc-label\">NF-Pd</div></a>`;\n                                }\n                            }\n                            \n                            if (temDoc(item.foto_comprovante)) {\n                                const isImg = item.foto_comprovante.match(/\\\\.(jpg|jpeg|png|gif|webp)/i);\n                                if (isImg) {\n                                    docsHtml += `<a href=\"${item.foto_comprovante}\" target=\"_blank\" class=\"doc-thumb\" title=\"Foto\"><img src=\"${item.foto_comprovante}\" alt=\"Foto\"><div class=\"doc-label\">Foto</div></a>`;\n                                } else {\n                                    docsHtml += `<a href=\"${item.foto_comprovante}\" target=\"_blank\" class=\"doc-thumb\" title=\"Foto\"><div class=\"doc-icon\">üì∑</div><div class=\"doc-label\">Foto</div></a>`;\n                                }\n                            }\n                            \n                            if (!docsHtml) docsHtml = '<span class=\"sem-docs\">Sem documentos</span>';\n\n                            return `<tr>\n                                <td><span class=\"id-badge\">#${item.solicitacao_id || '-'}</span></td>\n                                <td>\n                                    <div class=\"info-principal\">${data}</div>\n                                    <div class=\"info-secundaria\">${hora}</div>\n                                </td>\n                                <td><strong>${item.placa || '-'}</strong></td>\n                                <td class=\"info-secundaria\">${item.cidade || '-'}</td>\n                                <td class=\"info-secundaria\">${item.tipo_incidente || '-'}</td>\n                                <td>\n                                    <div class=\"info-principal\" title=\"${item.lista_produtos || ''}\">${produtos}${maisProds}</div>\n                                    <div class=\"info-secundaria\">${qtdProdutos} produto(s)</div>\n                                </td>\n                                <td><span class=\"status-tag ${statusClass}\">${item.status || 'Pendente'}</span></td>\n                                <td><span class=\"valor\">R$ ${valorFormatado}</span></td>\n                                <td><div class=\"docs-grid\">${docsHtml}</div></td>\n                            </tr>`;\n                        }).join('');\n                    })()\n                }}\n            </tbody>\n        </table>\n    </div>\n</div>\n\n{{\n    (()=>{\n        // Fun√ß√£o reutiliz√°vel para aplicar todos os filtros\n        window.aplicarTodosFiltros = function(dados) {\n            let filtrados = dados;\n            \n            // Filtro ID\n            if (typeof Filtro_ID !== 'undefined' && Filtro_ID?.text) {\n                filtrados = filtrados.filter(item => String(item.solicitacao_id||'').includes(Filtro_ID.text));\n            }\n            \n            // Filtro Status\n            if (typeof Filtro_Status !== 'undefined' && Filtro_Status?.selectedOptionValue && Filtro_Status.selectedOptionValue !== 'Todos') {\n                filtrados = filtrados.filter(item => item.status === Filtro_Status.selectedOptionValue);\n            }\n            \n            // Filtro Placa\n            if (typeof Filtro_Placa !== 'undefined' && Filtro_Placa?.text) {\n                filtrados = filtrados.filter(item => String(item.placa||'').toLowerCase().includes(Filtro_Placa.text.toLowerCase()));\n            }\n            \n            // Filtro Filial\n            if (typeof Filtro_Filial !== 'undefined' && Filtro_Filial?.text) {\n                filtrados = filtrados.filter(item => String(item.cidade||'').toLowerCase().includes(Filtro_Filial.text.toLowerCase()));\n            }\n            \n            // Filtro Tipo de Incidente\n            if (typeof Filtro_Tipo_Incidente !== 'undefined' && Filtro_Tipo_Incidente?.text) {\n                filtrados = filtrados.filter(item => String(item.tipo_incidente||'').toLowerCase().includes(Filtro_Tipo_Incidente.text.toLowerCase()));\n            }\n            \n            // Filtro Solicitante\n            if (typeof Filtro_Solicitante !== 'undefined' && Filtro_Solicitante?.text) {\n                filtrados = filtrados.filter(item => {\n                    const nome = String(item.nome_solicitante||item.criado_por||'').toLowerCase();\n                    return nome.includes(Filtro_Solicitante.text.toLowerCase());\n                });\n            }\n            \n            // Filtro Servi√ßo\n            if (typeof Filtro_Servico !== 'undefined' && Filtro_Servico?.text) {\n                filtrados = filtrados.filter(item => String(item.servico||'').toLowerCase().includes(Filtro_Servico.text.toLowerCase()));\n            }\n            \n            // Filtro Produto\n            if (typeof Filtro_Produto !== 'undefined' && Filtro_Produto?.text) {\n                filtrados = filtrados.filter(item => String(item.lista_produtos||'').toLowerCase().includes(Filtro_Produto.text.toLowerCase()));\n            }\n            \n            // Filtro Marca\n            if (typeof Filtro_Marca !== 'undefined' && Filtro_Marca?.text) {\n                filtrados = filtrados.filter(item => String(item.lista_marcas||'').toLowerCase().includes(Filtro_Marca.text.toLowerCase()));\n            }\n            \n            // Filtro Data In√≠cio\n            if (typeof Filtro_Data_Inicio !== 'undefined' && Filtro_Data_Inicio?.selectedDate) {\n                filtrados = filtrados.filter(item => {\n                    if (!item.data_abertura) return false;\n                    const dataItem = new Date(item.data_abertura);\n                    const dataInicio = new Date(Filtro_Data_Inicio.selectedDate);\n                    dataInicio.setHours(0,0,0,0);\n                    return dataItem >= dataInicio;\n                });\n            }\n            \n            // Filtro Data Fim\n            if (typeof Filtro_Data_Fim !== 'undefined' && Filtro_Data_Fim?.selectedDate) {\n                filtrados = filtrados.filter(item => {\n                    if (!item.data_abertura) return false;\n                    const dataItem = new Date(item.data_abertura);\n                    const dataFim = new Date(Filtro_Data_Fim.selectedDate);\n                    dataFim.setHours(23,59,59,999);\n                    return dataItem <= dataFim;\n                });\n            }\n            \n            // Filtro Valor M√≠nimo\n            if (typeof Filtro_Valor_Min !== 'undefined' && Filtro_Valor_Min?.text) {\n                const valorMin = parseFloat(Filtro_Valor_Min.text);\n                if (!isNaN(valorMin)) {\n                    filtrados = filtrados.filter(item => Number(item.valor_total_produtos||0) >= valorMin);\n                }\n            }\n            \n            // Filtro Valor M√°ximo\n            if (typeof Filtro_Valor_Max !== 'undefined' && Filtro_Valor_Max?.text) {\n                const valorMax = parseFloat(Filtro_Valor_Max.text);\n                if (!isNaN(valorMax)) {\n                    filtrados = filtrados.filter(item => Number(item.valor_total_produtos||0) <= valorMax);\n                }\n            }\n            \n            // Filtro Documentos\n            if (typeof Filtro_Documentos !== 'undefined' && Filtro_Documentos?.selectedOptionValue && Filtro_Documentos.selectedOptionValue !== 'Todos') {\n                filtrados = filtrados.filter(item => {\n                    const temDoc = (url) => url && url !== 'null' && url !== 'comprovante n√£o anexado' && url !== '';\n                    const temNfeServico = temDoc(item.nfe_servico_pdf);\n                    const temNfeProdutos = temDoc(item.nfe_produtos_pdf);\n                    \n                    if (Filtro_Documentos.selectedOptionValue === 'Completo') {\n                        return temNfeServico && temNfeProdutos;\n                    } else if (Filtro_Documentos.selectedOptionValue === 'Incompleto') {\n                        return (temNfeServico && !temNfeProdutos) || (!temNfeServico && temNfeProdutos);\n                    } else if (Filtro_Documentos.selectedOptionValue === 'Sem') {\n                        return !temNfeServico && !temNfeProdutos;\n                    }\n                    return true;\n                });\n            }\n            \n            // Filtro Lan√ßado no Winthor\n            if (typeof Filtro_Lancado_Winthor !== 'undefined' && Filtro_Lancado_Winthor?.selectedOptionValue && Filtro_Lancado_Winthor.selectedOptionValue !== 'Todos') {\n                filtrados = filtrados.filter(item => {\n                    if (Filtro_Lancado_Winthor.selectedOptionValue === 'Sim') {\n                        return item.lancado_winthor === true;\n                    } else if (Filtro_Lancado_Winthor.selectedOptionValue === 'Nao') {\n                        return !item.lancado_winthor || item.lancado_winthor === false;\n                    }\n                    return true;\n                });\n            }\n            \n            return filtrados;\n        };\n        return '';\n    })()\n}}\n\n<script>\n// Inicializar dados globalmente\nwindow.dadosSolicitacoes = [];\n\n// Dados diretos para teste (se o Appsmith falhar)\nconst DADOS_TESTE = [\n    {\n        solicitacao_id: 1,\n        data_abertura: \"2023-10-15T10:30:00\",\n        placa: \"ABC1234\",\n        cidade: \"S√£o Paulo\",\n        tipo_incidente: \"Manuten√ß√£o\",\n        lista_produtos: \"√ìleo, Filtro\",\n        quantidade_produtos: 2,\n        status: \"Aprovado\",\n        valor_total_produtos: 250.00,\n        nome_solicitante: \"Jo√£o Silva\"\n    },\n    {\n        solicitacao_id: 2,\n        data_abertura: \"2023-10-14T09:15:00\",\n        placa: \"XYZ5678\",\n        cidade: \"Rio de Janeiro\",\n        tipo_incidente: \"Reparo\",\n        lista_produtos: \"Pneu, Parafusos\",\n        quantidade_produtos: 2,\n        status: \"Pendente\",\n        valor_total_produtos: 450.00,\n        nome_solicitante: \"Maria Santos\"\n    },\n    {\n        solicitacao_id: 3,\n        data_abertura: \"2023-10-13T14:20:00\",\n        placa: \"DEF9012\",\n        cidade: \"Belo Horizonte\",\n        tipo_incidente: \"Revis√£o\",\n        lista_produtos: \"Fluido de Freio, Vela\",\n        quantidade_produtos: 2,\n        status: \"Reprovado\",\n        valor_total_produtos: 180.00,\n        nome_solicitante: \"Carlos Oliveira\"\n    }\n];\n\n// Fun√ß√£o para carregar dados do Appsmith\nfunction carregarDados() {\n    try {\n        // Tentar obter dados do Appsmith\n        const dadosJSON = '{{JSON.stringify(solicitacoes_frota_list?.data || [])}}';\n        const dados = JSON.parse(dadosJSON);\n        \n        if (dados && Array.isArray(dados) && dados.length > 0) {\n            window.dadosSolicitacoes = dados;\n            console.log('‚úÖ Dados carregados do Appsmith:', dados.length, 'registros');\n            return;\n        } else {\n            console.warn('‚ö†Ô∏è Appsmith retornou dados vazios, usando dados de teste');\n        }\n    } catch(e) {\n        console.error('‚ùå Erro ao carregar dados do Appsmith:', e);\n    }\n    \n    // Fallback para dados de teste\n    window.dadosSolicitacoes = DADOS_TESTE;\n    console.log('üì¶ Usando dados de teste:', DADOS_TESTE.length, 'registros');\n}\n\n// Carregar dados imediatamente\ncarregarDados();\n\n// Fun√ß√£o para aplicar filtros HTML\nfunction aplicarFiltrosHTML() {\n    console.log('üîç Aplicando filtros...');\n    \n    // Indicador visual\n    let btnProcessando = document.querySelector('.btn-aplicar');\n    if (btnProcessando) btnProcessando.classList.add('processando');\n    \n    // Garantir que temos os dados mais recentes\n    const dados = window.dadosSolicitacoes || [];\n    console.log('üìä Dados dispon√≠veis:', dados.length, 'registros');\n    \n    if (!dados || dados.length === 0) {\n        console.error('‚ùå Nenhum dado dispon√≠vel!');\n        if (btnProcessando) btnProcessando.classList.remove('processando');\n        \n        // Mostrar mensagem de erro na tabela\n        const tbody = document.getElementById('tabela_resultados');\n        if (tbody) {\n            tbody.innerHTML = `<tr>\n                <td colspan=\"9\" class=\"estado-vazio\">\n                    <div class=\"estado-vazio-icon\">‚ö†Ô∏è</div>\n                    <div class=\"estado-vazio-texto\">Dados n√£o dispon√≠veis</div>\n                    <div class=\"estado-vazio-sub\">\n                        Verifique se a query <strong>solicitacoes_frota_list</strong> est√° retornando dados.<br>\n                        <button id=\"btn-recarregar\" style=\"margin-top:12px;padding:8px 16px;background:#3b82f6;color:white;border:none;border-radius:6px;cursor:pointer;\">\n                            üîÑ Recarregar P√°gina\n                        </button>\n                    </div>\n                </td>\n            </tr>`;\n            \n            // Adicionar evento ao bot√£o de recarregar\n            const btnRecarregar = document.getElementById('btn-recarregar');\n            if (btnRecarregar) {\n                btnRecarregar.addEventListener('click', function() {\n                    location.reload();\n                });\n            }\n        }\n        return;\n    }\n    \n    // Criar c√≥pia para evitar modificar o original\n    let filtrados = [...dados];\n    \n    // Filtro ID\n    const filtroID = document.getElementById('filtro_id')?.value || '';\n    console.log('Filtro ID:', filtroID);\n    if (filtroID) {\n        filtrados = filtrados.filter(item => String(item.solicitacao_id||'').includes(filtroID));\n    }\n    \n    // Filtro Status\n    const filtroStatus = document.getElementById('filtro_status')?.value || 'Todos';\n    if (filtroStatus !== 'Todos') {\n        filtrados = filtrados.filter(item => item.status === filtroStatus);\n    }\n    \n    // Filtro Placa\n    const filtroPlaca = document.getElementById('filtro_placa')?.value || '';\n    if (filtroPlaca) {\n        filtrados = filtrados.filter(item => String(item.placa||'').toLowerCase().includes(filtroPlaca.toLowerCase()));\n    }\n    \n    // Filtro Filial\n    const filtroFilial = document.getElementById('filtro_filial')?.value || '';\n    if (filtroFilial) {\n        filtrados = filtrados.filter(item => String(item.cidade||'').toLowerCase().includes(filtroFilial.toLowerCase()));\n    }\n    \n    // Filtro Tipo Incidente\n    const filtroTipo = document.getElementById('filtro_tipo_incidente')?.value || '';\n    if (filtroTipo) {\n        filtrados = filtrados.filter(item => String(item.tipo_incidente||'').toLowerCase().includes(filtroTipo.toLowerCase()));\n    }\n    \n    // Filtro Solicitante\n    const filtroSolicitante = document.getElementById('filtro_solicitante')?.value || '';\n    if (filtroSolicitante) {\n        filtrados = filtrados.filter(item => {\n            const nome = String(item.nome_solicitante||item.criado_por||'').toLowerCase();\n            return nome.includes(filtroSolicitante.toLowerCase());\n        });\n    }\n    \n    // Filtro Servi√ßo\n    const filtroServico = document.getElementById('filtro_servico')?.value || '';\n    if (filtroServico) {\n        filtrados = filtrados.filter(item => String(item.servico||'').toLowerCase().includes(filtroServico.toLowerCase()));\n    }\n    \n    // Filtro Produto\n    const filtroProduto = document.getElementById('filtro_produto')?.value || '';\n    if (filtroProduto) {\n        filtrados = filtrados.filter(item => String(item.lista_produtos||'').toLowerCase().includes(filtroProduto.toLowerCase()));\n    }\n    \n    // Filtro Marca\n    const filtroMarca = document.getElementById('filtro_marca')?.value || '';\n    if (filtroMarca) {\n        filtrados = filtrados.filter(item => String(item.lista_marcas||'').toLowerCase().includes(filtroMarca.toLowerCase()));\n    }\n    \n    // Filtro Data In√≠cio\n    const dataInicio = document.getElementById('filtro_data_inicio')?.value || '';\n    if (dataInicio) {\n        filtrados = filtrados.filter(item => {\n            if (!item.data_abertura) return false;\n            const dataItem = new Date(item.data_abertura);\n            const dataInicioObj = new Date(dataInicio);\n            dataInicioObj.setHours(0,0,0,0);\n            return dataItem >= dataInicioObj;\n        });\n    }\n    \n    // Filtro Data Fim\n    const dataFim = document.getElementById('filtro_data_fim')?.value || '';\n    if (dataFim) {\n        filtrados = filtrados.filter(item => {\n            if (!item.data_abertura) return false;\n            const dataItem = new Date(item.data_abertura);\n            const dataFimObj = new Date(dataFim);\n            dataFimObj.setHours(23,59,59,999);\n            return dataItem <= dataFimObj;\n        });\n    }\n    \n    // Filtro Valor M√≠nimo\n    const valorMin = document.getElementById('filtro_valor_min')?.value || '';\n    if (valorMin) {\n        const valorMinNum = parseFloat(valorMin);\n        if (!isNaN(valorMinNum)) {\n            filtrados = filtrados.filter(item => Number(item.valor_total_produtos||0) >= valorMinNum);\n        }\n    }\n    \n    // Filtro Valor M√°ximo\n    const valorMax = document.getElementById('filtro_valor_max')?.value || '';\n    if (valorMax) {\n        const valorMaxNum = parseFloat(valorMax);\n        if (!isNaN(valorMaxNum)) {\n            filtrados = filtrados.filter(item => Number(item.valor_total_produtos||0) <= valorMaxNum);\n        }\n    }\n    \n    // Filtro Documentos\n    const filtroDocumentos = document.getElementById('filtro_documentos')?.value || 'Todos';\n    if (filtroDocumentos !== 'Todos') {\n        filtrados = filtrados.filter(item => {\n            const temDoc = (url) => url && url !== 'null' && url !== 'comprovante n√£o anexado' && url !== '';\n            const temNfeServico = temDoc(item.nfe_servico_pdf);\n            const temNfeProdutos = temDoc(item.nfe_produtos_pdf);\n            \n            if (filtroDocumentos === 'Completo') {\n                return temNfeServico && temNfeProdutos;\n            } else if (filtroDocumentos === 'Incompleto') {\n                return (temNfeServico && !temNfeProdutos) || (!temNfeServico && temNfeProdutos);\n            } else if (filtroDocumentos === 'Sem') {\n                return !temNfeServico && !temNfeProdutos;\n            }\n            return true;\n        });\n    }\n    \n    // Filtro Lan√ßado no Winthor\n    const filtroWinthor = document.getElementById('filtro_lancado_winthor')?.value || 'Todos';\n    if (filtroWinthor !== 'Todos') {\n        filtrados = filtrados.filter(item => {\n            if (filtroWinthor === 'Sim') {\n                return item.lancado_winthor === true;\n            } else if (filtroWinthor === 'Nao') {\n                return !item.lancado_winthor || item.lancado_winthor === false;\n            }\n            return true;\n        });\n    }\n    \n    console.log('‚úÖ Filtros aplicados! Total filtrado:', filtrados.length);\n    \n    // Renderizar resultados\n    renderizarResultados(filtrados);\n    \n    // Remover indicador visual\n    let btnFinalizado = document.querySelector('.btn-aplicar');\n    if (btnFinalizado) btnFinalizado.classList.remove('processando');\n}\n\n// Fun√ß√£o para renderizar resultados\nfunction renderizarResultados(filtrados) {\n    console.log('üìã Renderizando resultados...', filtrados.length, 'registros');\n    const limite = document.getElementById('limite_registros')?.value || '10';\n    const limiteNum = limite === 'Todos' ? filtrados.length : parseInt(limite);\n    console.log('üìÑ Limite:', limite, 'Limite num:', limiteNum);\n    \n    const registros = filtrados\n        .sort((a, b) => new Date(b.data_abertura || 0) - new Date(a.data_abertura || 0))\n        .slice(0, limiteNum);\n    \n    // Atualizar contador\n    const contadorEl = document.getElementById('contador_resultados');\n    const totalFiltradosEl = document.getElementById('total_filtrados');\n    const valorTotalEl = document.getElementById('valor_total');\n    \n    if (contadorEl) {\n        contadorEl.textContent = Math.min(limiteNum, filtrados.length);\n        console.log('‚úÖ Contador atualizado:', Math.min(limiteNum, filtrados.length));\n    }\n    if (totalFiltradosEl) {\n        totalFiltradosEl.textContent = filtrados.length;\n        console.log('‚úÖ Total filtrados atualizado:', filtrados.length);\n    }\n    \n    // Atualizar valor total\n    const valorTotal = filtrados.reduce((sum, item) => sum + Number(item.valor_total_produtos || 0), 0);\n    if (valorTotalEl) {\n        valorTotalEl.textContent = 'R$ ' + valorTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2});\n        console.log('‚úÖ Valor total atualizado:', valorTotal);\n    }\n    \n    // Renderizar tabela\n    const tbody = document.getElementById('tabela_resultados');\n    if (!tbody) {\n        console.error('Tbody n√£o encontrado!');\n        return;\n    }\n    \n    if (registros.length === 0) {\n        tbody.innerHTML = `<tr>\n            <td colspan=\"9\" class=\"estado-vazio\">\n                <div class=\"estado-vazio-icon\">üîç</div>\n                <div class=\"estado-vazio-texto\">Nenhuma solicita√ß√£o encontrada</div>\n                <div class=\"estado-vazio-sub\">Tente ajustar os filtros</div>\n            </td>\n        </tr>`;\n        return;\n    }\n    \n    tbody.innerHTML = registros.map(item => {\n        const data = item.data_abertura ? new Date(item.data_abertura).toLocaleDateString('pt-BR', {day:'2-digit', month:'2-digit', year:'2-digit'}) : '-';\n        const hora = item.data_abertura ? new Date(item.data_abertura).toLocaleTimeString('pt-BR', {hour:'2-digit', minute:'2-digit'}) : '';\n        \n        const statusClass = item.status === 'Aprovado' ? 'status-aprovado' : \n                           item.status === 'Reprovado' ? 'status-reprovado' : 'status-pendente';\n        \n        const valor = Number(item.valor_total_produtos || 0);\n        const valorFormatado = valor.toLocaleString('pt-BR', {minimumFractionDigits: 2});\n        \n        const produtos = String(item.lista_produtos || '-').split(',').slice(0, 2).join(', ');\n        const qtdProdutos = item.quantidade_produtos || 0;\n        const maisProds = String(item.lista_produtos||'').split(',').length > 2 ? '...' : '';\n        \n        // Documentos\n        const temDoc = (url) => url && url !== 'null' && url !== 'comprovante n√£o anexado' && url !== '';\n        let docsHtml = '';\n        \n        if (temDoc(item.link_orcamento_pdf)) {\n            const isImg = item.link_orcamento_pdf.match(/\\.(jpg|jpeg|png|gif|webp)/i);\n            if (isImg) {\n                docsHtml += `<a href=\"${item.link_orcamento_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"Or√ßamento\"><img src=\"${item.link_orcamento_pdf}\" alt=\"Or√ßamento\"><div class=\"doc-label\">Or√ß</div></a>`;\n            } else {\n                docsHtml += `<a href=\"${item.link_orcamento_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"Or√ßamento\"><div class=\"doc-icon\">üìÑ</div><div class=\"doc-label\">Or√ß</div></a>`;\n            }\n        }\n        \n        if (temDoc(item.nfe_servico_pdf)) {\n            const isImg = item.nfe_servico_pdf.match(/\\.(jpg|jpeg|png|gif|webp)/i);\n            if (isImg) {\n                docsHtml += `<a href=\"${item.nfe_servico_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Servi√ßo\"><img src=\"${item.nfe_servico_pdf}\" alt=\"NF Servi√ßo\"><div class=\"doc-label\">NF-Sv</div></a>`;\n            } else {\n                docsHtml += `<a href=\"${item.nfe_servico_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Servi√ßo\"><div class=\"doc-icon\">üìÉ</div><div class=\"doc-label\">NF-Sv</div></a>`;\n            }\n        }\n        \n        if (temDoc(item.nfe_produtos_pdf)) {\n            const isImg = item.nfe_produtos_pdf.match(/\\.(jpg|jpeg|png|gif|webp)/i);\n            if (isImg) {\n                docsHtml += `<a href=\"${item.nfe_produtos_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Produtos\"><img src=\"${item.nfe_produtos_pdf}\" alt=\"NF Produtos\"><div class=\"doc-label\">NF-Pd</div></a>`;\n            } else {\n                docsHtml += `<a href=\"${item.nfe_produtos_pdf}\" target=\"_blank\" class=\"doc-thumb\" title=\"NF Produtos\"><div class=\"doc-icon\">üìÉ</div><div class=\"doc-label\">NF-Pd</div></a>`;\n            }\n        }\n        \n        if (temDoc(item.foto_comprovante)) {\n            const isImg = item.foto_comprovante.match(/\\.(jpg|jpeg|png|gif|webp)/i);\n            if (isImg) {\n                docsHtml += `<a href=\"${item.foto_comprovante}\" target=\"_blank\" class=\"doc-thumb\" title=\"Foto\"><img src=\"${item.foto_comprovante}\" alt=\"Foto\"><div class=\"doc-label\">Foto</div></a>`;\n            } else {\n                docsHtml += `<a href=\"${item.foto_comprovante}\" target=\"_blank\" class=\"doc-thumb\" title=\"Foto\"><div class=\"doc-icon\">üì∑</div><div class=\"doc-label\">Foto</div></a>`;\n            }\n        }\n        \n        if (!docsHtml) docsHtml = '<span class=\"sem-docs\">Sem documentos</span>';\n\n        return `<tr>\n            <td><span class=\"id-badge\">#${item.solicitacao_id || '-'}</span></td>\n            <td>\n                <div class=\"info-principal\">${data}</div>\n                <div class=\"info-secundaria\">${hora}</div>\n            </td>\n            <td><strong>${item.placa || '-'}</strong></td>\n            <td class=\"info-secundaria\">${item.cidade || '-'}</td>\n            <td class=\"info-secundaria\">${item.tipo_incidente || '-'}</td>\n            <td>\n                <div class=\"info-principal\" title=\"${item.lista_produtos || ''}\">${produtos}${maisProds}</div>\n                <div class=\"info-secundaria\">${qtdProdutos} produto(s)</div>\n            </td>\n            <td><span class=\"status-tag ${statusClass}\">${item.status || 'Pendente'}</span></td>\n            <td><span class=\"valor\">R$ ${valorFormatado}</span></td>\n            <td><div class=\"docs-grid\">${docsHtml}</div></td>\n        </tr>`;\n    }).join('');\n    \n    console.log('‚úÖ Tabela atualizada com', registros.length, 'registros!');\n}\n\n// Fun√ß√£o para limpar filtros\nfunction limparFiltros() {\n    document.getElementById('filtro_id').value = '';\n    document.getElementById('filtro_status').value = 'Todos';\n    document.getElementById('filtro_placa').value = '';\n    document.getElementById('filtro_filial').value = '';\n    document.getElementById('filtro_tipo_incidente').value = '';\n    document.getElementById('filtro_solicitante').value = '';\n    document.getElementById('filtro_servico').value = '';\n    document.getElementById('filtro_produto').value = '';\n    document.getElementById('filtro_marca').value = '';\n    document.getElementById('filtro_data_inicio').value = '';\n    document.getElementById('filtro_data_fim').value = '';\n    document.getElementById('filtro_valor_min').value = '';\n    document.getElementById('filtro_valor_max').value = '';\n    document.getElementById('filtro_documentos').value = 'Todos';\n    document.getElementById('filtro_lancado_winthor').value = 'Todos';\n    document.getElementById('limite_registros').value = '10';\n    \n    aplicarFiltrosHTML();\n}\n\n// Event listeners\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Carregar dados iniciais sem filtros\n    aplicarFiltrosHTML();\n    \n    // Adicionar evento de Enter nos inputs para aplicar filtro\n    const inputs = document.querySelectorAll('.filtro-input, .filtro-select');\n    inputs.forEach(input => {\n        input.addEventListener('keypress', function(e) {\n            if (e.key === 'Enter') {\n                aplicarFiltrosHTML();\n            }\n        });\n        \n        // Adicionar evento change para selects\n        if (input.tagName === 'SELECT') {\n            input.addEventListener('change', function() {\n                aplicarFiltrosHTML();\n            });\n        }\n    });\n    \n    // Adicionar evento click para bot√£o limpar filtros\n    const btnLimpar = document.getElementById('btn-limpar-filtros');\n    if (btnLimpar) {\n        btnLimpar.addEventListener('click', function() {\n            limparFiltros();\n        });\n    }\n    \n    // Adicionar evento click para bot√£o aplicar filtros\n    const btnAplicar = document.getElementById('btn-aplicar-filtros');\n    if (btnAplicar) {\n        btnAplicar.addEventListener('click', function() {\n            aplicarFiltrosHTML();\n        });\n    }\n    \n    // Expor fun√ß√µes globalmente para Appsmith\n    window.aplicarFiltrosHTML = aplicarFiltrosHTML;\n    window.limparFiltros = limparFiltros;\n    \n    // Adicionar fun√ß√£o de debug global\n    window.debugFiltros = function() {\n        console.log('üîç DEBUG FILTROS:');\n        console.log('- window.dadosSolicitacoes:', window.dadosSolicitacoes);\n        console.log('- Filtro ID:', document.getElementById('filtro_id')?.value);\n        console.log('- Filtro Status:', document.getElementById('filtro_status')?.value);\n        console.log('- Filtro Placa:', document.getElementById('filtro_placa')?.value);\n        console.log('- tabela_resultados:', document.getElementById('tabela_resultados'));\n        console.log('- btn-aplicar-filtros:', document.getElementById('btn-aplicar-filtros'));\n        \n        // Tentar aplicar filtros\n        try {\n            aplicarFiltrosHTML();\n            return \"Filtros aplicados com sucesso!\";\n        } catch(e) {\n            console.error('‚ùå Erro ao aplicar filtros:', e);\n            return \"Erro: \" + e.message;\n        }\n    };\n});\n</script>\n",
  "topRow": 2,
  "type": "IFRAME_WIDGET",
  "version": 1,
  "widgetId": "4r8os3r5ye",
  "widgetName": "Iframe16"
}
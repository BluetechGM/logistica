{
  "gitSyncId": "684accaaccd99e1ff73d47d3_22c86982-0314-4e27-840b-a277353a79ec",
  "id": "Finaceiro_solicitacoes_produtos",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "INSERT INTO compras_so.produtos_solicitacao (\n    peca,\n    preco,                -- total (qtd × unitário)\n    id_solicitacao,\n    marca,\n    quantidade,\n    preco_unitario,\n    id_solicitante,\n    nome_solicitante,\n    data_solicitacao,\n    observacoes,\n    valor_servico,\n    servico_peca\n)\nVALUES\n{{ \n  (appsmith.store.produtos || []).map(p => {\n    const precoUnitario = Number(String(p.preco_unitario || p.preco)\n                                  .replace(/\\./g,'')\n                                  .replace(',','.')\n                                  .replace(/[^0-9.-]+/g,\"\"));\n    const qtd = Number(p.quant || 1);\n    const total = precoUnitario * qtd;\n\n    const valorServico = Number(String(p.precoso || '0')\n                                  .replace(/\\./g,'')\n                                  .replace(',','.')\n                                  .replace(/[^0-9.-]+/g,\"\"));\n\n    return `(\n      '${p.peca}', \n      ${total}, \n      '${gerar_id.gerarIdUnico.data}', \n      '${p.marca}', \n      ${qtd}, \n      ${precoUnitario}, \n      '${appsmith.store.usuario_id || \"00\"}', \n      '${appsmith.store.usuario_nome || \"usuario_nao_logado\"}', \n      CURRENT_TIMESTAMP, \n      '${(p.obs || \"\").replace(/'/g,\"''\")}',\n      ${valorServico},\n      '${(p.servicopeca || \"\").replace(/'/g,\"''\")}'\n    )`;\n  }).join(\",\")\n}};\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": false
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "CANDIDATOS",
      "isAutoGenerated": false,
      "name": "CANDIDATOS",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "solicitacoes_produtos",
    "pageId": "Finaceiro",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}
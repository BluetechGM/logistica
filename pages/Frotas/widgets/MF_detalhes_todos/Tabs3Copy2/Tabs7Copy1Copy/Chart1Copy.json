{
  "accentColor": "{{appsmith.theme.colors.primaryColor}}",
  "allowScroll": false,
  "animateLoading": true,
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "bottomRow": 69,
  "boxShadow": "0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",
  "chartData": {
    "kkxebnqug6": {
      "data": "{{\n  (historico_precos_pecas.data || []).map(item => ({\n    x: item.data_formatada,\n    y: Number(item.preco_unitario)\n  }))\n}}",
      "seriesName": "Preço das Peças"
    }
  },
  "chartName": "Sales Report",
  "chartType": "CUSTOM_ECHART",
  "customEChartConfig": "{{ ((chartType) => ( \n  (() => {\n    let dados = historico_precos_pecas.data || [];\n    \n    // Aplica filtro de PERÍODO (dias)\n    const diasFiltro = parseInt(Input_Periodo_Dias.text) || 0;\n    if (diasFiltro > 0) {\n      const hoje = new Date();\n      const dataLimite = new Date(hoje.getTime() - (diasFiltro * 24 * 60 * 60 * 1000));\n      dados = dados.filter(d => {\n        if (!d.data_solicitacao) return false;\n        const dataItem = new Date(d.data_solicitacao);\n        return dataItem >= dataLimite;\n      });\n    }\n    \n    // Aplica filtro de cidade\n    const cidadeFiltro = Select_Cidade_Filtro.selectedOptionValue;\n    if (cidadeFiltro && cidadeFiltro !== '') {\n      dados = dados.filter(d => d.cidade && d.cidade.toUpperCase().includes(cidadeFiltro.toUpperCase()));\n    }\n    \n    // Aplica filtro de PEÇA (MultiSelect)\n    const pecasFiltro = Select_Servico_Filtro.selectedOptionValues || [];\n    if (pecasFiltro.length > 0) {\n      dados = dados.filter(d => {\n        if (!d.peca) return false;\n        return pecasFiltro.some(p => d.peca.trim().toLowerCase() === p.trim().toLowerCase());\n      });\n    }\n    \n    const pecas = [...new Set(dados.map(d => d.peca))].slice(0, 10);\n    const datas = [...new Set(dados.map(d => d.data_formatada))];\n    \n    return {\n      title: { text: 'Histórico de Preços das Peças', left: 'center' },\n      tooltip: { \n        trigger: 'axis',\n        axisPointer: {\n          type: 'line',\n          lineStyle: { type: 'dashed', color: '#999' }\n        }\n      },\n      legend: { bottom: 0, type: 'scroll' },\n      grid: { left: '3%', right: '4%', bottom: '15%', top: '15%', containLabel: true },\n      xAxis: { \n        type: 'category', \n        data: datas, \n        axisLabel: { rotate: 45 },\n        splitLine: { show: true, lineStyle: { type: 'dashed', color: '#ddd' } },\n        axisTick: { alignWithLabel: true }\n      },\n      yAxis: { \n        type: 'value', \n        name: 'Preço (R$)',\n        splitLine: { lineStyle: { type: 'dashed', color: '#eee' } }\n      },\n      series: pecas.map(peca => ({\n        name: peca,\n        type: 'line',\n        smooth: true,\n        data: dados.filter(d => d.peca === peca).map(d => Number(d.preco_unitario)),\n        label: {\n          show: true,\n          position: 'top',\n          formatter: function(params) { return 'R$ ' + params.value.toFixed(2); },\n          fontSize: 10,\n          color: '#333'\n        },\n        symbolSize: 8,\n        lineStyle: { width: 2 }\n      }))\n    };\n  })()\n))(Chart1.chartType) }}",
  "customFusionChartConfig": {
    "dataSource": {
      "chart": {
        "alignCaptionWithCanvas": 1,
        "canvasPadding": "0",
        "caption": "Sales Report",
        "captionAlignment": "center",
        "captionFontColor": "#231F20",
        "captionFontSize": "24",
        "captionPadding": "20",
        "chartBottomMargin": "10",
        "chartLeftMargin": "20",
        "chartRightMargin": "40",
        "chartTopMargin": "10",
        "labelFontColor": "#716e6e",
        "labelFontSize": "12",
        "legendIconAlpha": "100",
        "legendIconBgAlpha": "100",
        "legendIconSides": "4",
        "legendPosition": "top",
        "theme": "fusion",
        "xAxisName": "Product Line",
        "xAxisNameFontColor": "#716e6e",
        "xAxisNameFontSize": "14",
        "yAxisName": "Revenue($)",
        "yAxisNameFontColor": "#716e6e",
        "yAxisNameFontSize": "14",
        "yAxisValueFontColor": "#716e6e",
        "yAxisValueFontSize": "12"
      },
      "data": [
        {
          "label": "Product1",
          "value": 20000
        },
        {
          "label": "Product2",
          "value": 22000
        },
        {
          "label": "Product3",
          "value": 32000
        }
      ]
    },
    "type": "column2d"
  },
  "dynamicBindingPathList": [
    {
      "key": "customEChartConfig"
    },
    {
      "key": "borderRadius"
    },
    {
      "key": "accentColor"
    },
    {
      "key": "fontFamily"
    },
    {
      "key": "chartData.kkxebnqug6.data"
    }
  ],
  "dynamicTriggerPathList": [],
  "flexVerticalAlignment": "start",
  "fontFamily": "{{appsmith.theme.fontFamily.appFont}}",
  "isLoading": false,
  "isVisible": true,
  "key": "f99iyo4beg",
  "labelOrientation": "auto",
  "leftColumn": 0,
  "minWidth": 450,
  "mobileBottomRow": 53,
  "mobileLeftColumn": 9,
  "mobileRightColumn": 33,
  "mobileTopRow": 21,
  "needsErrorInfo": true,
  "originalBottomRow": 69,
  "originalTopRow": 13,
  "parentColumnSpace": 18.321875,
  "parentId": "w9dpmrsp96",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "responsiveBehavior": "fill",
  "rightColumn": 64,
  "showDataPointLabel": false,
  "topRow": 13,
  "type": "CHART_WIDGET",
  "version": 1,
  "widgetId": "i6q6ci3f2u",
  "widgetName": "Chart1Copy",
  "xAxisName": "Product Line",
  "yAxisName": "Revenue($)"
}
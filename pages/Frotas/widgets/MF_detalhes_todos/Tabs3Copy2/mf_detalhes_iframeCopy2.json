{
  "animateLoading": true,
  "borderColor": "transparent",
  "borderOpacity": "0",
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": "0",
  "bottomRow": 170,
  "boxShadow": "none",
  "dynamicBindingPathList": [
    {
      "key": "borderRadius"
    },
    {
      "key": "srcDoc"
    }
  ],
  "dynamicTriggerPathList": [],
  "flexVerticalAlignment": "start",
  "isLoading": false,
  "isVisible": true,
  "key": "wcjiwgvzsi",
  "leftColumn": 0,
  "mobileBottomRow": 41,
  "mobileLeftColumn": 8,
  "mobileRightColumn": 32,
  "mobileTopRow": 9,
  "needsErrorInfo": false,
  "originalBottomRow": 175,
  "originalTopRow": 120,
  "parentColumnSpace": 18.56015625,
  "parentId": "xsng0xmw7d",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "responsiveBehavior": "fill",
  "rightColumn": 63,
  "source": "",
  "srcDoc": "<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<!--\n    TEMPLATE APPSMITH - Sistema de Manuten√ß√£o de Frotas\n\n    VARI√ÅVEIS DIN√ÇMICAS USADAS:\n    - {{mfs_todos.triggeredItem.*}} - Dados da solicita√ß√£o selecionada\n    - {{produtos_mf_todos.data}} - Array de produtos da query produtos_mf_todos\n-->\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lista de Solicita√ß√µes - Manuten√ß√£o de Frotas</title>\n\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background-color: #f5f5f5;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 12px;\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n            overflow: hidden;\n        }\n\n        .header {\n            background: linear-gradient(to bottom right, #155A87, #348EB6);\n            color: white;\n            padding: 25px;\n            text-align: center;\n        }\n\n        .header h1 {\n            font-size: 28px;\n            font-weight: 600;\n            margin-bottom: 8px;\n        }\n\n        .header p {\n            font-size: 16px;\n            opacity: 0.9;\n        }\n\n        .solicitacao-card {\n            border: 1px solid #e1e5e9;\n            border-radius: 8px;\n            margin: 20px;\n            padding: 25px;\n            background: white;\n            transition: all 0.3s ease;\n            position: relative;\n        }\n\n        .solicitacao-card:hover {\n            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n            transform: translateY(-2px);\n        }\n\n        .card-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #f0f0f0;\n        }\n\n        .placa-info {\n            display: flex;\n            align-items: center;\n            gap: 15px;\n        }\n\n        .placa-badge {\n            background: linear-gradient(135deg, #155A87, #348EB6);\n            color: white;\n            padding: 8px 16px;\n            border-radius: 20px;\n            font-weight: bold;\n            font-size: 16px;\n            letter-spacing: 1px;\n        }\n\n        .status-badge {\n            padding: 6px 12px;\n            border-radius: 15px;\n            font-size: 12px;\n            font-weight: 600;\n            text-transform: uppercase;\n        }\n\n        .status-aberto {\n            background-color: #fff3cd;\n            color: #856404;\n            border: 1px solid #ffeaa7;\n        }\n\n        .status-aprovado {\n            background-color: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .status-reprovado {\n            background-color: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        .info-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n            gap: 20px;\n            margin-bottom: 20px;\n        }\n\n        .info-section {\n            background: #f8f9fa;\n            padding: 15px;\n            border-radius: 6px;\n            border-left: 4px solid #155A87;\n        }\n\n        .info-section h3 {\n            color: #495057;\n            font-size: 14px;\n            font-weight: 600;\n            margin-bottom: 8px;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n        }\n\n        .info-section p {\n            color: #6c757d;\n            font-size: 14px;\n            line-height: 1.4;\n        }\n\n        .info-section.qr-section {\n            display: flex;\n            flex-direction: column;\n            gap: 10px;\n            border-left-color: #348EB6;\n        }\n\n        .qr-code-box {\n            display: flex;\n            align-items: center;\n            gap: 15px;\n            background: white;\n            border: 1px dashed rgba(52, 142, 182, 0.4);\n            padding: 12px;\n            border-radius: 8px;\n        }\n\n        .qr-code-placeholder {\n            width: 70px;\n            height: 70px;\n            border-radius: 10px;\n            background: radial-gradient(circle at top, #e0f2ff, #d0dff0);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 10px;\n            color: #348EB6;\n            font-weight: 600;\n            letter-spacing: 1px;\n        }\n\n        .pix-chip {\n            display: inline-flex;\n            align-items: center;\n            gap: 6px;\n            padding: 5px 12px;\n            background: rgba(52, 142, 182, 0.1);\n            color: #155A87;\n            border-radius: 999px;\n            font-size: 12px;\n            font-weight: 600;\n            border: 1px solid rgba(52, 142, 182, 0.2);\n        }\n\n        .servico-section {\n            background: #e6f1ff;\n            padding: 20px;\n            border-radius: 8px;\n            margin: 15px 0;\n            border-left: 4px solid #155A87;\n        }\n\n        .servico-section h3 {\n            color: #155A87;\n            font-size: 16px;\n            font-weight: 600;\n            margin-bottom: 10px;\n        }\n\n        .servico-section p {\n            color: #424242;\n            font-size: 14px;\n            line-height: 1.6;\n        }\n\n        .produtos-section {\n            background: #e8f4fd;\n            padding: 20px;\n            border-radius: 8px;\n            margin: 15px 0;\n            border-left: 4px solid #348EB6;\n        }\n\n        .produtos-section h3 {\n            color: #155A87;\n            font-size: 16px;\n            font-weight: 600;\n            margin-bottom: 10px;\n        }\n\n        .valor-info {\n            display: flex;\n            gap: 20px;\n            margin-top: 10px;\n            flex-wrap: wrap;\n        }\n\n        .valor-item {\n            background: white;\n            padding: 10px 15px;\n            border-radius: 6px;\n            border: 1px solid #e0e0e0;\n            text-align: center;\n            min-width: 120px;\n        }\n\n        .valor-item .label {\n            font-size: 12px;\n            color: #666;\n            font-weight: 500;\n        }\n\n        .valor-item .value {\n            font-size: 16px;\n            color: #333;\n            font-weight: bold;\n            margin-top: 4px;\n        }\n\n        .produtos-detalhados {\n            margin-top: 20px;\n            padding-top: 15px;\n            border-top: 1px solid #e0e0e0;\n        }\n\n        .produtos-detalhados h4 {\n            color: #155A87;\n            font-size: 16px;\n            font-weight: 600;\n            margin-bottom: 15px;\n            text-align: center;\n        }\n\n        .tabela-orcamento {\n            width: 100%;\n            border-collapse: collapse;\n            background: white;\n            border-radius: 8px;\n            overflow: hidden;\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n\n        .tabela-orcamento thead {\n            background: linear-gradient(135deg, #155A87, #348EB6);\n            color: white;\n        }\n\n        .tabela-orcamento th {\n            padding: 12px 8px;\n            text-align: left;\n            font-weight: 600;\n            font-size: 12px;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n        }\n\n        .tabela-orcamento td {\n            padding: 10px 8px;\n            border-bottom: 1px solid #f0f0f0;\n            font-size: 13px;\n            vertical-align: middle;\n        }\n\n        .tabela-orcamento tbody tr:hover {\n            background-color: #f8f9fa;\n        }\n\n        .tabela-orcamento tbody tr:last-child td {\n            border-bottom: none;\n        }\n\n        .produto-id {\n            font-weight: bold;\n            color: #155A87;\n            font-size: 11px;\n        }\n\n        .produto-nome {\n            font-weight: 600;\n            color: #333;\n            max-width: 200px;\n            word-wrap: break-word;\n        }\n\n        .produto-marca {\n            background: #f0f0f0;\n            padding: 2px 6px;\n            border-radius: 8px;\n            font-size: 11px;\n            color: #666;\n            display: inline-block;\n        }\n\n        .produto-quantidade {\n            text-align: center;\n            font-weight: 600;\n            color: #333;\n        }\n\n        .produto-preco-unitario {\n            text-align: right;\n            font-weight: 600;\n            color: #333;\n        }\n\n        .produto-preco-total {\n            text-align: right;\n            font-weight: bold;\n            color: #2E7D32;\n            background: #E8F5E8;\n            padding: 4px 8px;\n            border-radius: 4px;\n        }\n\n        .produto-status {\n            text-align: center;\n            font-weight: 600;\n            padding: 2px 6px;\n            border-radius: 4px;\n            font-size: 11px;\n        }\n\n        .status-ok {\n            background: #E8F5E8;\n            color: #2E7D32;\n        }\n\n        .status-divergencia {\n            background: #FFC107;\n            color: #FF9800;\n        }\n\n        .tabela-totais {\n            margin-top: 15px;\n            background: #f8f9fa;\n            border-radius: 8px;\n            padding: 15px;\n        }\n\n        .linha-total {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 8px;\n        }\n\n        .linha-total:last-child {\n            margin-bottom: 0;\n            padding-top: 8px;\n            border-top: 2px solid #155A87;\n            font-weight: bold;\n            font-size: 16px;\n            color: #155A87;\n        }\n\n        .label-total {\n            font-weight: 600;\n            color: #333;\n        }\n\n        .valor-total {\n            font-weight: bold;\n            color: #2E7D32;\n        }\n\n        .footer-info {\n            margin-top: 24px;\n            padding: 24px;\n            border-top: 1px solid #e9ecef;\n            background: #f9fbfd;\n            border-radius: 12px;\n            display: flex;\n            flex-direction: column;\n            gap: 18px;\n        }\n\n        .footer-info h3 {\n            font-size: 15px;\n            font-weight: 600;\n            color: #134e6f;\n            letter-spacing: 0.5px;\n        }\n\n        .link-gallery {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 18px;\n        }\n\n        .link-card {\n            position: relative;\n            min-height: 180px;\n            width: 240px;\n            border-radius: 14px;\n            overflow: hidden;\n            text-decoration: none;\n            color: inherit;\n\n            background: linear-gradient(145deg, #ffffff, #f0f4ff);\n            border: 1px solid rgba(19, 78, 111, 0.1);\n            box-shadow: 0 10px 25px rgba(19, 78, 111, 0.08);\n            display: flex;\n            flex-direction: column;\n            transition: transform 0.25s ease, box-shadow 0.25s ease;\n        }\n\n        .link-card:hover {\n            transform: translateY(-6px);\n            box-shadow: 0 18px 35px rgba(19, 78, 111, 0.18);\n        }\n\n        .link-card.disabled {\n            opacity: 0.55;\n            pointer-events: none;\n            background: #f5f5f5;\n        }\n\n        .preview-media {\n            flex: 0 0 140px;\n            height: 140px;\n            background: #dde6f7;\n        }\n\n        .preview-media img,\n        .pdf-preview {\n            width: 100%;\n            height: 100%;\n            object-fit: contain;\n            display: block;\n            border: none;\n        }\n\n        .preview-placeholder {\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 13px;\n            color: #7a7a7a;\n            padding: 16px;\n            text-align: center;\n        }\n\n        .link-meta {\n            padding: 16px 18px;\n            display: flex;\n            flex-direction: column;\n            gap: 6px;\n        }\n\n        .link-type {\n            font-weight: 600;\n            color: #134e6f;\n            font-size: 14px;\n        }\n\n        .link-action {\n            font-size: 12px;\n            color: #5d6d7e;\n        }\n\n        .link-cta {\n            margin-top: 12px;\n            align-self: flex-start;\n            padding: 6px 12px;\n            border-radius: 999px;\n            font-size: 11px;\n            font-weight: 600;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n            border: 1px solid rgba(19, 78, 111, 0.3);\n            color: #134e6f;\n            background: rgba(19, 78, 111, 0.05);\n            transition: background 0.2s ease, color 0.2s ease;\n        }\n\n        .link-card:not(.disabled):hover .link-cta {\n            background: #134e6f;\n            color: #fff;\n        }\n\n        .link-cta.disabled {\n            border-color: #c8c8c8;\n            color: #9b9b9b;\n            background: rgba(0, 0, 0, 0.04);\n        }\n\n        .footer-meta {\n            font-size: 12px;\n            color: #6c757d;\n            text-align: right;\n        }\n\n        @media (max-width: 768px) {\n            .tabela-orcamento {\n                font-size: 11px;\n            }\n\n            .tabela-orcamento th,\n            .tabela-orcamento td {\n                padding: 8px 4px;\n            }\n\n            .produto-nome {\n                max-width: 120px;\n            }\n\n            .produto-marca {\n                display: inline-block;\n            }\n        }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: #999;\n        }\n\n        .no-data h3 {\n            margin-bottom: 10px;\n            color: #666;\n        }\n\n        @media (max-width: 768px) {\n            .info-grid {\n                grid-template-columns: 1fr;\n            }\n\n            .card-header {\n                flex-direction: column;\n                align-items: flex-start;\n                gap: 10px;\n            }\n\n            .valor-info {\n                justify-content: center;\n            }\n\n            .footer-info {\n                flex-direction: column;\n                gap: 10px;\n                text-align: center;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>üîß Sistema de Manuten√ß√£o de Frotas</h1>\n            <p>Lista de Solicita√ß√µes de Manuten√ß√£o</p>\n        </div>\n\n        <div id=\"solicitacoes-container\">\n            <!-- Os dados ser√£o inseridos dinamicamente aqui -->\n        </div>\n    </div>\n\n    <script>\n        // Fun√ß√£o para formatar data\n        function formatarData(dataISO) {\n            if (!dataISO) return 'N/A';\n            const data = new Date(dataISO);\n            return data.toLocaleDateString('pt-BR', {\n                day: '2-digit',\n                month: '2-digit',\n                year: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit'\n            });\n        }\n\n        // Fun√ß√£o para formatar moeda\n        function formatarMoeda(valor) {\n            if (!valor && valor !== 0) return 'R$ 0,00';\n            return new Intl.NumberFormat('pt-BR', {\n                style: 'currency',\n                currency: 'BRL'\n            }).format(valor);\n        }\n\n        function formatarCNPJ(valor) {\n            if (!valor) return 'N/A';\n            const digits = String(valor).replace(/\\D/g, '');\n            if (digits.length !== 14) return valor;\n            return digits.replace(/(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/, '$1.$2.$3/$4-$5');\n        }\n\n        // Fun√ß√£o para obter classe CSS do status\n        function getStatusClass(status) {\n            switch (status?.toLowerCase()) {\n                case 'em aberto':\n                case 'aberto':\n                    return 'status-aberto';\n                case 'aprovado':\n                case 'aprovada':\n                    return 'status-aprovado';\n                case 'reprovado':\n                case 'reprovada':\n                    return 'status-reprovado';\n                default:\n                    return 'status-aberto';\n            }\n        }\n\n        function normalizeLink(rawValue) {\n            if (rawValue === undefined || rawValue === null) return '';\n            const value = String(rawValue).trim();\n            if (!value || value === 'null' || value === 'undefined') return '';\n\n            if ((value.startsWith('[') && value.endsWith(']')) || (value.startsWith('{') && value.endsWith('}'))) {\n                try {\n                    const parsed = JSON.parse(value);\n                    if (Array.isArray(parsed) && parsed.length > 0) {\n                        return parsed[0] ? String(parsed[0]).trim() : '';\n                    }\n                    if (typeof parsed === 'string') {\n                        return parsed.trim();\n                    }\n                } catch (error) {\n                    // fallback to raw value\n                }\n            }\n\n            if ((value.startsWith('\"') && value.endsWith('\"')) || (value.startsWith(\"'\") && value.endsWith(\"'\"))) {\n                return value.substring(1, value.length - 1).trim();\n            }\n\n            return value;\n        }\n\n        function normalizeLinks(rawValue) {\n            if (rawValue === undefined || rawValue === null) return [];\n            const trimmed = String(rawValue).trim();\n            if (!trimmed || trimmed === 'null' || trimmed === 'undefined') return [];\n\n            try {\n                const parsed = JSON.parse(trimmed);\n                if (Array.isArray(parsed)) {\n                    return parsed\n                        .map(item => normalizeLink(item))\n                        .filter(item => Boolean(item));\n                }\n            } catch (error) {\n                // not JSON, continue parsing\n            }\n\n            if (trimmed.includes(',')) {\n                return trimmed\n                    .split(',')\n                    .map(part => normalizeLink(part))\n                    .filter(item => Boolean(item));\n            }\n\n            const single = normalizeLink(trimmed);\n            return single ? [single] : [];\n        }\n\n        function textoLimpo(rawValue, fallback = 'N/A') {\n            if (rawValue === undefined || rawValue === null) return fallback;\n            const trimmed = String(rawValue).trim();\n            return trimmed ? trimmed : fallback;\n        }\n\n        // Dados din√¢micos do Appsmith (vari√°veis substitu√≠das pelo Appsmith em runtime)\n        // eslint-disable-next-line\n        const solicitacao = {\n            \"solicitacao_id\": \"{{mfs_todos.triggeredItem.solicitacao_id}}\",\n            \"placa\": \"{{mfs_todos.triggeredItem.placa}}\",\n            \"odometro_atual\": Number(\"{{mfs_todos.triggeredItem.odometro_atual}}\") || 0,\n            \"odometro_prox_troca\": Number(\"{{mfs_todos.triggeredItem.odometro_prox_troca}}\") || 0,\n            \"data_prox_manutencao\": \"{{mfs_todos.triggeredItem.data_prox_manutencao}}\",\n            \"cidade\": \"{{mfs_todos.triggeredItem.cidade}}\",\n            \"criado_por\": \"{{mfs_todos.triggeredItem.criado_por}}\",\n            \"servico\": \"{{mfs_todos.triggeredItem.servico}}\",\n            \"status\": \"{{mfs_todos.triggeredItem.status}}\",\n            \"data_abertura\": \"{{mfs_todos.triggeredItem.data_abertura}}\",\n            \"id_solicitacao\": \"{{mfs_todos.triggeredItem.id_solicitacao}}\",\n            \"filial_id\": \"{{mfs_todos.triggeredItem.filial_id}}\",\n            \"id_solicitante\": \"{{mfs_todos.triggeredItem.id_solicitante}}\",\n            \"nome_solicitante\": \"{{mfs_todos.triggeredItem.nome_solicitante}}\",\n            \"link_orcamento_pdf\": normalizeLink(\"{{mfs_todos.triggeredItem.link_orcamento_pdf}}\"),\n            \"link_fotos_orcamento\": normalizeLinks(\"{{mfs_todos.triggeredItem.link_fotos_orcamento}}\"),\n            \"quantidade_produtos\": Number(\"{{mfs_todos.triggeredItem.quantidade_produtos}}\") || 0,\n            \"valor_total_produtos\": Number(\"{{mfs_todos.triggeredItem.valor_total_produtos}}\") || 0,\n            \"valor_medio_produtos\": Number(\"{{mfs_todos.triggeredItem.valor_medio_produtos}}\") || 0,\n            \"menor_preco_produto\": Number(\"{{mfs_todos.triggeredItem.menor_preco_produto}}\") || 0,\n            \"maior_preco_produto\": Number(\"{{mfs_todos.triggeredItem.maior_preco_produto}}\") || 0,\n            \"lista_produtos\": \"{{mfs_todos.triggeredItem.lista_produtos}}\",\n            \"lista_marcas\": \"{{mfs_todos.triggeredItem.lista_marcas}}\",\n            \"cnpj\": textoLimpo(\"{{mfs_todos.triggeredItem.cnpj}}\", ''),\n            \"chave_pix\": textoLimpo(\"{{mfs_todos.triggeredItem.chave_pix}}\", ''),\n            \"link_video_orcamento\": normalizeLink(\"{{mfs_todos.triggeredItem.link_video_orcamento}}\")\n        };\n\n        function renderPreviewCard(type, url, options = {}) {\n            const resolvedUrl = Array.isArray(url) ? url[0] : url;\n            const hasUrl = Boolean(resolvedUrl && resolvedUrl !== 'null' && resolvedUrl !== 'undefined' && resolvedUrl !== '');\n            const isImage = type === 'image';\n            const isVideo = type === 'video';\n            const title = options.title || (isImage ? 'Fotos do or√ßamento' : isVideo ? 'V√≠deo do or√ßamento' : 'PDF do or√ßamento');\n            const icon = options.icon || (isImage ? 'üñºÔ∏è' : isVideo ? 'üé•' : 'üìÑ');\n            const actionLabel = options.actionText || (hasUrl ? (isVideo ? 'Clique para assistir em nova aba' : 'Clique para ampliar em nova aba') : 'Aguardando envio');\n            const ctaActiveLabel = options.ctaText || (isVideo ? 'Assistir v√≠deo' : 'Abrir documento');\n            const media = hasUrl\n                ? (isImage\n                    ? `<img src=\"${resolvedUrl}\" alt=\"${title}\">`\n                    : isVideo\n                        ? `<video src=\"${resolvedUrl}\" controls></video>`\n                        : `<iframe class=\"pdf-preview\" src=\"${resolvedUrl}\" title=\"${title}\"></iframe>`)\n                : '<div class=\"preview-placeholder\">Documento n√£o dispon√≠vel</div>';\n\n            const cardInner = `\n                <div class=\"preview-media\">\n                    ${media}\n                </div>\n                <div class=\"link-meta\">\n                    <span class=\"link-type\">${icon} ${title}</span>\n                    <span class=\"link-action\">${actionLabel}</span>\n                    <span class=\"link-cta ${hasUrl ? '' : 'disabled'}\">${hasUrl ? ctaActiveLabel : 'Sem documento'}</span>\n                </div>\n            `;\n\n            if (!hasUrl) {\n                return `<div class=\"link-card disabled\">${cardInner}</div>`;\n            }\n\n            return `\n                <a class=\"link-card\" href=\"${resolvedUrl}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    ${cardInner}\n                </a>\n            `;\n        }\n\n        function renderFotosOrcamento(links) {\n            const normalizedLinks = Array.isArray(links) ? links : normalizeLinks(links);\n            if (!normalizedLinks.length) {\n                return renderPreviewCard('image', '', { title: 'Fotos do or√ßamento' });\n            }\n\n            return normalizedLinks\n                .map((link, index) =>\n                    renderPreviewCard('image', link, {\n                        title: `Foto ${index + 1}`,\n                        actionText: 'Clique para ampliar em nova aba',\n                        ctaText: 'Abrir foto'\n                    })\n                )\n                .join('');\n        }\n\n        function renderizarSolicitacao() {\n            return `\n                <div class=\"solicitacao-card\">\n                    <div class=\"card-header\">\n                        <div class=\"placa-info\">\n                            <div class=\"placa-badge\">${solicitacao.placa || 'N/A'}</div>\n                            <div>\n                                <strong>ID:</strong> ${solicitacao.solicitacao_id || solicitacao.id_solicitacao || 'N/A'}\n                            </div>\n                        </div>\n                        <div class=\"status-badge ${getStatusClass(solicitacao.status)}\">\n                            ${solicitacao.status || 'Em aberto'}\n                        </div>\n                    </div>\n\n                    <div class=\"info-grid\">\n                        <div class=\"info-section\">\n                            <h3>üìä Od√¥metro</h3>\n                            <p><strong>Atual:</strong> ${solicitacao.odometro_atual.toLocaleString('pt-BR')} km</p>\n                            <p><strong>Pr√≥xima troca:</strong> ${solicitacao.odometro_prox_troca.toLocaleString('pt-BR')} km</p>\n                        </div>\n\n                        <div class=\"info-section\">\n                            <h3>üìç Localiza√ß√£o</h3>\n                            <p><strong>Cidade:</strong> ${solicitacao.cidade || 'N/A'}</p>\n                            <p><strong>Filial ID:</strong> ${solicitacao.filial_id || 'N/A'}</p>\n                        </div>\n\n                        <div class=\"info-section\">\n                            <h3>üë§ Solicitante</h3>\n                            <p><strong>Nome:</strong> ${solicitacao.nome_solicitante || solicitacao.criado_por || 'N/A'}</p>\n                            <p><strong>ID:</strong> ${solicitacao.id_solicitante || 'N/A'}</p>\n                        </div>\n\n                        <div class=\"info-section\">\n                            <h3>üìÖ Datas</h3>\n                            <p><strong>Abertura:</strong> ${formatarData(solicitacao.data_abertura)}</p>\n                            <p><strong>Pr√≥xima manuten√ß√£o:</strong> ${formatarData(solicitacao.data_prox_manutencao)}</p>\n                        </div>\n\n                        <div class=\"info-section qr-section\">\n                            <h3>üí≥ Dados de cobran√ßa</h3>\n                            <p><strong>CNPJ:</strong> ${solicitacao.cnpj ? formatarCNPJ(solicitacao.cnpj) : 'N√£o informado'}</p>\n                            <div class=\"qr-code-box\">\n                                <div class=\"qr-code-placeholder\">PIX</div>\n                                <div>\n                                    <p><strong>Chave PIX:</strong></p>\n                                    <span class=\"pix-chip\">${solicitacao.chave_pix || 'N√£o informada'}</span>\n                                    <small>Compartilhe essa chave para agilizar pagamentos.</small>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"servico-section\">\n                        <h3>üîß Servi√ßos Solicitados</h3>\n                        <p>${solicitacao.servico || 'Nenhum servi√ßo especificado'}</p>\n                    </div>\n\n                    <div class=\"produtos-section\">\n                        <h3>üì¶ Produtos</h3>\n                        <p><strong>Lista:</strong> ${solicitacao.lista_produtos || 'Nenhum produto especificado'}</p>\n                        <p><strong>Marcas:</strong> ${solicitacao.lista_marcas || 'N/A'}</p>\n\n                        <div class=\"valor-info\">\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Quantidade</div>\n                                <div class=\"value\">${solicitacao.quantidade_produtos}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Valor Total</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.valor_total_produtos)}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Valor M√©dio</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.valor_medio_produtos)}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Menor Pre√ßo</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.menor_preco_produto)}</div>\n                            </div>\n                            <div class=\"valor-item\">\n                                <div class=\"label\">Maior Pre√ßo</div>\n                                <div class=\"value\">${formatarMoeda(solicitacao.maior_preco_produto)}</div>\n                            </div>\n                        </div>\n\n                        <div class=\"produtos-detalhados\">\n                            <h4>üìã Or√ßamento Detalhado</h4>\n                            <div id=\"tabela-produtos-container\">\n                                ${renderizarTabelaProdutos()}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"footer-info\">\n                        <h3>üìé Documentos do or√ßamento</h3>\n                        <div class=\"link-gallery\">\n                            ${renderPreviewCard('pdf', solicitacao.link_orcamento_pdf)}\n                            ${renderFotosOrcamento(solicitacao.link_fotos_orcamento)}\n                            ${renderPreviewCard('video', solicitacao.link_video_orcamento)}\n                        </div>\n                        <div class=\"footer-meta\">\n                            √öltima atualiza√ß√£o: ${formatarData(new Date().toISOString())}\n                        </div>\n                    </div>\n                </div>\n            `;\n        }\n\n        function renderizarTabelaProdutos() {\n            return `\n                <table class=\"tabela-orcamento\">\n                    <thead>\n                        <tr>\n                            <th>ID</th>\n                            <th>Produto</th>\n                            <th>Marca</th>\n                            <th>Qtd</th>\n                            <th>Pre√ßo Unit.</th>\n                            <th>Total</th>\n                            <th>Status</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{produtos_mf_todos.data.map(p => '<tr style=\"border-bottom:1px solid #f0f0f0;\"><td class=\"produto-id\">' + p.produto_id + '</td><td class=\"produto-nome\">' + p.nome_produto + '</td><td><span class=\"produto-marca\">' + p.marca + '</span></td><td class=\"produto-quantidade\">' + p.quantidade + '</td><td class=\"produto-preco-unitario\">R$ ' + Number(p.preco_unitario).toFixed(2).replace('.', ',') + '</td><td class=\"produto-preco-total\">R$ ' + Number(p.preco_total).toFixed(2).replace('.', ',') + '</td><td><span class=\"produto-status ' + (p.status_calculo === 'OK' ? 'status-ok' : 'status-divergencia') + '\">' + p.status_calculo + '</span></td></tr>').join('')}}\n                    </tbody>\n                </table>\n\n                <div class=\"tabela-totais\">\n                    <div class=\"linha-total\">\n                        <span class=\"label-total\">Total de Produtos:</span>\n                        <span class=\"valor-total\">{{produtos_mf_todos.data.length}}</span>\n                    </div>\n                    <div class=\"linha-total\">\n                        <span class=\"label-total\">Total de Itens:</span>\n                        <span class=\"valor-total\">{{produtos_mf_todos.data.reduce((sum, p) => sum + p.quantidade, 0)}}</span>\n                    </div>\n                    <div class=\"linha-total\">\n                        <span class=\"label-total\">Valor Total do Or√ßamento:</span>\n                        <span class=\"valor-total\">R$ {{produtos_mf_todos.data.reduce((sum, p) => sum + p.preco_total, 0).toFixed(2).replace('.', ',')}}</span>\n                    </div>\n                </div>\n            `;\n        }\n\n        document.addEventListener('DOMContentLoaded', function () {\n            const container = document.getElementById('solicitacoes-container');\n            container.innerHTML = renderizarSolicitacao();\n        });\n    </script>\n\n</body>\n</html>",
  "topRow": 0,
  "type": "IFRAME_WIDGET",
  "version": 1,
  "widgetId": "fd2idke5yy",
  "widgetName": "mf_detalhes_iframeCopy2"
}
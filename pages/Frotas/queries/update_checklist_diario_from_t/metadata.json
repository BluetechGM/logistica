{
  "gitSyncId": "684accaaccd99e1ff73d47d3_504768dc-a63f-404b-ba3f-7033c8c00b05",
  "id": "Frotas_update_checklist_diario_from_t",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "UPDATE compras_so.checklist_diario_motos\nSET\n  -- ‚úÖ OD√îMETRO (corrigido, ver problema 2 abaixo)\n  odometro = COALESCE(\n    NULLIF({{ Number(Input_odometro.text) }}, 0),\n    odometro\n  ),\n\n  nivel_combustivel    = '{{ appsmith.store.Combustivel }}',\n  farol                = '{{ appsmith.store.Farol }}',\n  luz_freio            = '{{ appsmith.store.LuzFreio }}',\n  setas                = '{{ appsmith.store.Setas }}',\n  pneu                 = '{{ appsmith.store.Pneu }}',\n  pneu_traseiro        = '{{ appsmith.store.PneuTraseiro }}',\n  vazamento_oleo       = '{{ appsmith.store.Vazamento }}',\n  freio_dianteiro      = '{{ appsmith.store.FreioDianteiro }}',\n  freio_traseiro       = '{{ appsmith.store.FreioTraseiro }}',\n  manetes_pedaleiras   = '{{ appsmith.store.ManetesPedaleiras }}',\n  espelhos             = '{{ appsmith.store.Espelhos }}',\n  buzina               = '{{ appsmith.store.Buzina }}',\n  documentacao_crlv    = '{{ appsmith.store.Documentacao }}',\n\n  resultado_final = {{\n    [\n      appsmith.store.Combustivel,\n      appsmith.store.Farol,\n      appsmith.store.LuzFreio,\n      appsmith.store.Setas,\n      appsmith.store.Pneu,\n      appsmith.store.PneuTraseiro,\n      appsmith.store.Vazamento,\n      appsmith.store.FreioDianteiro,\n      appsmith.store.FreioTraseiro,\n      appsmith.store.ManetesPedaleiras,\n      appsmith.store.Espelhos,\n      appsmith.store.Buzina,\n      appsmith.store.Documentacao\n    ].includes(\"NC\")\n      ? 'NAO_APTO'\n      : 'APTO'\n  }},\n\n  observacoes = COALESCE(\n    NULLIF('{{ observacoes_checklistCopy.text }}', ''),\n    observacoes\n  ),\n\n  -- üî•üî•üî• AQUI EST√Å O PONTO CR√çTICO\n  fotos_checklist = COALESCE(fotos_checklist, '[]'::jsonb)\n                    || {{ JSON.stringify(appsmith.store.novas_fotos_urls || []) }}::jsonb\n\nWHERE id_checklist = {{ appsmith.store.checklist_edit_id }};\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "CANDIDATOS",
      "isAutoGenerated": false,
      "name": "CANDIDATOS",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "update_checklist_diario_from_t",
    "pageId": "Frotas",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}